(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.plugins,l=window.wp.editPost,o=window.wp.data,s=window.wp.element,i=window.wp.apiFetch;var n=e.n(i);const r=window.wp.components,c=({title:e,description:a,url:l})=>{const o=e.length>60?e.substring(0,57)+"...":e,s=a.length>160?a.substring(0,157)+"...":a||"No description provided. Add a meta description to control what appears here.";return(0,t.createElement)("div",{className:"wpseopilot-search-preview"},(0,t.createElement)("div",{className:"wpseopilot-search-preview__breadcrumb"},(0,t.createElement)("div",{className:"wpseopilot-search-preview__favicon"},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,t.createElement)("path",{d:"M12 6v6l4 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}))),(0,t.createElement)("div",{className:"wpseopilot-search-preview__url-container"},(0,t.createElement)("span",{className:"wpseopilot-search-preview__site-name"},(()=>{try{return new URL(l).hostname.replace("www.","")}catch{return"example.com"}})()),(0,t.createElement)("span",{className:"wpseopilot-search-preview__url"},(e=>{try{const t=new URL(e),a="/"===t.pathname?"":t.pathname;return`${t.hostname}${a}`}catch{return e}})(l))),(0,t.createElement)("button",{type:"button",className:"wpseopilot-search-preview__menu","aria-label":"More options"},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},(0,t.createElement)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,t.createElement)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,t.createElement)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})))),(0,t.createElement)("h3",{className:"wpseopilot-search-preview__title"},o||"Page Title"),(0,t.createElement)("p",{className:"wpseopilot-search-preview__description"},s))},p={excellent:"#00a32a",good:"#00a32a",fair:"#dba617",poor:"#d63638"},m=({score:e=0,level:a="poor"})=>{const l=p[a]||p.poor,o=2*Math.PI*20,s=o-e/100*o;return(0,t.createElement)("div",{className:"wpseopilot-gauge"},(0,t.createElement)("svg",{viewBox:"0 0 48 48",className:"wpseopilot-gauge__svg"},(0,t.createElement)("circle",{className:"wpseopilot-gauge__bg",cx:"24",cy:"24",r:"20",fill:"none",strokeWidth:"4"}),(0,t.createElement)("circle",{className:"wpseopilot-gauge__progress",cx:"24",cy:"24",r:"20",fill:"none",strokeWidth:"4",strokeDasharray:o,strokeDashoffset:s,strokeLinecap:"round",style:{stroke:l}})),(0,t.createElement)("div",{className:"wpseopilot-gauge__value",style:{color:l}},e))},d=({variables:e={},onSelect:a,context:l="post",buttonLabel:o="Variables",disabled:i=!1,compact:n=!1,isOpen:r,onToggle:c,onClose:p})=>{const[m,d]=(0,s.useState)(!1),[u,w]=(0,s.useState)(""),h=(0,s.useRef)(null),E=void 0!==r?r:m,v=e=>{void 0!==r?e?c?.():p?.():d(e)};(0,s.useEffect)(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&v(!1)};return E&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[E,r]);const g=e=>{a&&a(`{{${e.tag}}}`),v(!1),w("")},_=()=>{void 0!==r?c?.():d(!m)},b=E?(()=>{const t={},a={global:["global"],post:["global","post"],taxonomy:["global","taxonomy"],archive:["global","archive","author"],author:["global","author"],date:["global","archive"],search:["global"],404:["global"]}[l]||["global","post"];return Object.entries(e).forEach(([e,l])=>{if(!a.includes(e))return;const o=(l.vars||[]).filter(e=>{if(!u)return!0;const t=u.toLowerCase();return e.tag.toLowerCase().includes(t)||e.label.toLowerCase().includes(t)||e.desc&&e.desc.toLowerCase().includes(t)});o.length>0&&(t[e]={...l,vars:o})}),t})():{};return n?(0,t.createElement)("div",{className:"wpseopilot-variable-picker wpseopilot-variable-picker--compact",ref:h},(0,t.createElement)("button",{type:"button",className:"wpseopilot-template-input__action-btn wpseopilot-template-input__action-btn--vars",onClick:_,disabled:i,title:"Insert variable"},(0,t.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,t.createElement)("path",{d:"M4 7h3a1 1 0 0 0 1-1V3"}),(0,t.createElement)("path",{d:"M20 7h-3a1 1 0 0 1-1-1V3"}),(0,t.createElement)("path",{d:"M4 17h3a1 1 0 0 1 1 1v3"}),(0,t.createElement)("path",{d:"M20 17h-3a1 1 0 0 0-1 1v3"}),(0,t.createElement)("path",{d:"M9 12h6"}),(0,t.createElement)("path",{d:"M12 9v6"}))),E&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__dropdown"},(0,t.createElement)("div",{className:"wpseopilot-variable-picker__search"},(0,t.createElement)("input",{type:"text",placeholder:"Search variables...",value:u,onChange:e=>w(e.target.value),autoFocus:!0})),(0,t.createElement)("div",{className:"wpseopilot-variable-picker__groups"},Object.entries(b).map(([e,a])=>(0,t.createElement)("div",{key:e,className:"wpseopilot-variable-picker__group"},(0,t.createElement)("div",{className:`wpseopilot-variable-picker__group-label wpseopilot-variable-picker__group-label--${e}`},a.label),(0,t.createElement)("div",{className:"wpseopilot-variable-picker__items"},a.vars.map(a=>(0,t.createElement)("button",{key:a.tag,type:"button",className:"wpseopilot-variable-picker__item",onClick:()=>g(a)},(0,t.createElement)("div",{className:"wpseopilot-variable-picker__item-header"},(0,t.createElement)("code",{className:`wpseopilot-variable-picker__tag wpseopilot-variable-picker__tag--${e}`},a.tag),(0,t.createElement)("span",{className:"wpseopilot-variable-picker__label"},a.label)),a.preview&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__preview"},a.preview)))))),0===Object.keys(b).length&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__empty"},"No variables found")))):(0,t.createElement)("div",{className:"wpseopilot-variable-picker",ref:h},(0,t.createElement)("button",{type:"button",className:"wpseopilot-variable-picker__trigger",onClick:_,disabled:i,title:"Insert variable"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"16",height:"16"},(0,t.createElement)("path",{fillRule:"evenodd",d:"M4.5 2A2.5 2.5 0 002 4.5v3.879a2.5 2.5 0 00.732 1.767l7.5 7.5a2.5 2.5 0 003.536 0l3.878-3.878a2.5 2.5 0 000-3.536l-7.5-7.5A2.5 2.5 0 008.38 2H4.5zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),(0,t.createElement)("span",null,o)),E&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__dropdown"},(0,t.createElement)("div",{className:"wpseopilot-variable-picker__search"},(0,t.createElement)("input",{type:"text",placeholder:"Search variables...",value:u,onChange:e=>w(e.target.value),autoFocus:!0})),(0,t.createElement)("div",{className:"wpseopilot-variable-picker__groups"},Object.entries(b).map(([e,a])=>(0,t.createElement)("div",{key:e,className:"wpseopilot-variable-picker__group"},(0,t.createElement)("div",{className:`wpseopilot-variable-picker__group-label wpseopilot-variable-picker__group-label--${e}`},a.label),(0,t.createElement)("div",{className:"wpseopilot-variable-picker__items"},a.vars.map(a=>(0,t.createElement)("button",{key:a.tag,type:"button",className:"wpseopilot-variable-picker__item",onClick:()=>g(a)},(0,t.createElement)("div",{className:"wpseopilot-variable-picker__item-header"},(0,t.createElement)("code",{className:`wpseopilot-variable-picker__tag wpseopilot-variable-picker__tag--${e}`},a.tag),(0,t.createElement)("span",{className:"wpseopilot-variable-picker__label"},a.label)),a.preview&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__preview"},a.preview)))))),0===Object.keys(b).length&&(0,t.createElement)("div",{className:"wpseopilot-variable-picker__empty"},"No variables found"))))},u={site_title:"global",tagline:"global",site_url:"global",separator:"separator",current_year:"global",current_month:"global",current_day:"global",post_title:"post",post_excerpt:"post",post_date:"post",post_modified:"post",post_author:"post",post_id:"post",post_content:"post",term_title:"taxonomy",term_description:"taxonomy",term_count:"taxonomy",author_name:"author",author_bio:"author",archive_title:"archive",search_query:"archive",page_number:"archive"},w=e=>{const t=e.indexOf("|");return t>-1?e.substring(0,t).trim():e.trim()},h=e=>{const t=w(e);return u[t]||"global"},E=({value:e="",onChange:a,placeholder:l="",variables:o={},variableValues:i={},context:n="post",multiline:r=!1,maxLength:c=null,label:p="",helpText:m="",id:u,disabled:E=!1,onAiClick:v=null,showAiButton:g=!0,aiEnabled:_=!0})=>{const b=(0,s.useRef)(null),y=(0,s.useRef)(null),[k,N]=(0,s.useState)(!1),[f,x]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=b.current,t=y.current;if(!e||!t)return;const a=()=>{t.scrollTop=e.scrollTop,t.scrollLeft=e.scrollLeft};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)},[]);const M=(0,s.useMemo)(()=>{if(!e)return[];const t=[];let a=0;const l=/\{\{([^}]+)\}\}/g;let o;for(;null!==(o=l.exec(e));){o.index>a&&t.push({type:"text",content:e.slice(a,o.index)});const s=o[1].trim(),n=w(s),r=h(n),c=i[n]||i[`{{${n}}}`];t.push({type:"variable",fullTag:s,baseTag:n,raw:o[0],preview:c||n,varType:r}),a=l.lastIndex}return a<e.length&&t.push({type:"text",content:e.slice(a)}),t},[e,i]),P=e.length,L=c&&P>c,A=r?"textarea":"input";return(0,t.createElement)("div",{className:`wpseopilot-template-input ${k?"is-focused":""} ${E?"is-disabled":""}`},p&&(0,t.createElement)("div",{className:"wpseopilot-template-input__header"},(0,t.createElement)("label",{className:"wpseopilot-template-input__label",htmlFor:u},p),c&&(0,t.createElement)("span",{className:"wpseopilot-template-input__counter "+(L?"over-limit":P>0?"has-value":"")},P,"/",c)),(0,t.createElement)("div",{className:"wpseopilot-template-input__container"},(0,t.createElement)("div",{ref:y,className:"wpseopilot-template-input__highlight "+(r?"multiline":""),"aria-hidden":"true"},M.map((e,a)=>"variable"===e.type?(0,t.createElement)("span",{key:a,className:`wpseopilot-template-input__var wpseopilot-template-input__var--${e.varType}`,onMouseEnter:()=>S({...e,index:a}),onMouseLeave:()=>S(null)},(0,t.createElement)("span",{className:"wpseopilot-template-input__bracket"},"{"),(0,t.createElement)("span",{className:"wpseopilot-template-input__bracket"},"{"),(0,t.createElement)("span",{className:"wpseopilot-template-input__tag"},e.fullTag),(0,t.createElement)("span",{className:"wpseopilot-template-input__bracket"},"}"),(0,t.createElement)("span",{className:"wpseopilot-template-input__bracket"},"}"),C?.index===a&&e.preview&&(0,t.createElement)("span",{className:"wpseopilot-template-input__tooltip"},e.preview)):(0,t.createElement)("span",{key:a},e.content)),!e&&(0,t.createElement)("span",{className:"wpseopilot-template-input__placeholder"},l)),(0,t.createElement)(A,{ref:b,id:u,type:r?void 0:"text",className:"wpseopilot-template-input__field "+(r?"multiline":""),value:e,onChange:e=>a(e.target.value),onFocus:()=>N(!0),onBlur:()=>N(!1),placeholder:"",disabled:E,rows:r?3:void 0}),(0,t.createElement)("div",{className:"wpseopilot-template-input__actions"},g&&(0,t.createElement)("button",{type:"button",className:"wpseopilot-template-input__action-btn wpseopilot-template-input__action-btn--ai "+(_?"":"is-disabled"),onClick:()=>{_&&v?v():_||window.confirm("AI features require WP AI Pilot to be configured.\n\nWould you like to open the AI settings now?")&&window.open("admin.php?page=wp-ai-pilot","_blank")},disabled:E,title:"Generate with AI"},(0,t.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,t.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,t.createElement)("circle",{cx:"12",cy:"12",r:"4"}))),(0,t.createElement)(d,{variables:o,context:n,onSelect:t=>{const l=b.current;if(!l)return void a(e+t);const o=l.selectionStart,s=l.selectionEnd,i=e.slice(0,o)+t+e.slice(s);a(i),x(!1),requestAnimationFrame(()=>{const e=o+t.length;l.setSelectionRange(e,e),l.focus()})},disabled:E,isOpen:f,onToggle:()=>x(!f),onClose:()=>x(!1),compact:!0}))),m&&(0,t.createElement)("div",{className:"wpseopilot-template-input__footer"},(0,t.createElement)("span",{className:"wpseopilot-template-input__help"},m)))},v=({isOpen:e,onClose:a,onGenerate:l,fieldType:o="title",currentValue:i="",variableValues:r={},context:c={},postTitle:p="",postContent:m="",aiProvider:d="none",aiPilot:u=null})=>{const[w,h]=(0,s.useState)(!1),[E,v]=(0,s.useState)(null),[g,_]=(0,s.useState)(!0),[b,y]=(0,s.useState)(""),[k,N]=(0,s.useState)(null),f=(0,s.useCallback)(()=>{if(!g)return"";const e=[];p&&e.push(`Post title: ${p}`),c.type&&e.push(`Content type: ${c.type}`);const t=Object.entries(r).filter(([e,t])=>t&&"string"==typeof t).map(([e,t])=>`${e.replace(/_/g," ")}: ${t}`);if(t.length>0&&e.push(...t),m){const t=m.replace(/<[^>]*>/g,"").substring(0,500);t&&e.push(`Content preview: ${t}...`)}return e.join("\n")},[g,r,c,p,m]),x=async()=>{h(!0),v(null),N(null);try{let e="";e=b?b+"\n\n"+f():f()||"Generate SEO metadata for a website.",e+="title"===o?"\n\nGenerate an SEO-optimized title (max 60 characters).":"\n\nGenerate an SEO-optimized meta description (max 155 characters).";const t=await n()({path:"/wpseopilot/v2/ai/generate",method:"POST",data:{content:e,type:o}});if(t.success&&t.data){const e="title"===o?t.data.title:t.data.description;N(e)}else v(t.message||"Failed to generate content")}catch(e){v(e.message||"An error occurred during generation")}finally{h(!1)}},C=()=>{N(null),v(null),y(""),a()};return e?"none"===d?(0,t.createElement)("div",{className:"wpseopilot-ai-modal-overlay",onClick:C},(0,t.createElement)("div",{className:"wpseopilot-ai-modal wpseopilot-ai-modal--notice",onClick:e=>e.stopPropagation()},(0,t.createElement)("div",{className:"wpseopilot-ai-modal__header"},(0,t.createElement)("h3",null,(0,t.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("path",{d:"M12 8v4m0 4h.01"})),"AI Not Configured"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__close",onClick:C,"aria-label":"Close"},(0,t.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M18 6L6 18M6 6l12 12"})))),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__body"},u?.installed?(0,t.createElement)("div",{className:"wpseopilot-ai-notice wpseopilot-ai-notice--warning"},(0,t.createElement)("div",{className:"wpseopilot-ai-notice__icon"},(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}))),(0,t.createElement)("div",{className:"wpseopilot-ai-notice__content"},(0,t.createElement)("h4",null,"WP AI Pilot Needs Configuration"),(0,t.createElement)("p",null,"WP AI Pilot is installed but not yet configured. Add an API key to enable AI-powered SEO suggestions."))):(0,t.createElement)("div",{className:"wpseopilot-ai-notice wpseopilot-ai-notice--info"},(0,t.createElement)("div",{className:"wpseopilot-ai-notice__icon"},(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}))),(0,t.createElement)("div",{className:"wpseopilot-ai-notice__content"},(0,t.createElement)("h4",null,"Enhance with WP AI Pilot"),(0,t.createElement)("p",null,"Install WP AI Pilot to unlock AI-powered title and meta description generation.")))),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__footer"},(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--secondary",onClick:C},"Cancel"),u?.installed?(0,t.createElement)("a",{href:u.settingsUrl,className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--primary"},"Configure WP AI Pilot"):(0,t.createElement)("a",{href:"/wp-admin/plugin-install.php?s=wp+ai+pilot&tab=search",className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--primary"},"Install WP AI Pilot")))):(0,t.createElement)("div",{className:"wpseopilot-ai-modal-overlay",onClick:C},(0,t.createElement)("div",{className:"wpseopilot-ai-modal",onClick:e=>e.stopPropagation()},(0,t.createElement)("div",{className:"wpseopilot-ai-modal__header"},(0,t.createElement)("h3",null,(0,t.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,t.createElement)("circle",{cx:"12",cy:"12",r:"4"})),"Generate ","title"===o?"Title":"Description"),"wp-ai-pilot"===d&&(0,t.createElement)("span",{className:"wpseopilot-ai-badge"},(0,t.createElement)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),"WP AI Pilot"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__close",onClick:C,"aria-label":"Close"},(0,t.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M18 6L6 18M6 6l12 12"})))),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__body"},(0,t.createElement)("div",{className:"wpseopilot-ai-modal__option"},(0,t.createElement)("label",{className:"wpseopilot-ai-modal__checkbox"},(0,t.createElement)("input",{type:"checkbox",checked:g,onChange:e=>_(e.target.checked)}),(0,t.createElement)("span",{className:"wpseopilot-ai-modal__checkbox-label"},"Include post content as context"))),g&&p&&(0,t.createElement)("div",{className:"wpseopilot-ai-modal__context-preview"},(0,t.createElement)("div",{className:"wpseopilot-ai-modal__context-item"},(0,t.createElement)("span",{className:"wpseopilot-ai-modal__context-key"},"Post:"),(0,t.createElement)("span",{className:"wpseopilot-ai-modal__context-value"},p))),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__field"},(0,t.createElement)("label",{htmlFor:"ai-custom-prompt"},"Custom instructions (optional)"),(0,t.createElement)("textarea",{id:"ai-custom-prompt",value:b,onChange:e=>y(e.target.value),placeholder:`e.g., "Focus on ${"title"===o?"including keywords":"highlighting benefits"}"`,rows:2})),E&&(0,t.createElement)("div",{className:"wpseopilot-ai-modal__error"},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("path",{d:"M12 8v4m0 4h.01"})),E),k&&(0,t.createElement)("div",{className:"wpseopilot-ai-modal__result"},(0,t.createElement)("label",null,"Generated ","title"===o?"title":"description",":"),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__result-box"},(0,t.createElement)("p",null,k),(0,t.createElement)("span",{className:"wpseopilot-ai-modal__char-count"},k.length," characters")))),(0,t.createElement)("div",{className:"wpseopilot-ai-modal__footer"},(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--secondary",onClick:C},"Cancel"),k?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__btn",onClick:x,disabled:w},"Regenerate"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--primary",onClick:()=>{k&&(l(k),C())}},"Apply")):(0,t.createElement)("button",{type:"button",className:"wpseopilot-ai-modal__btn wpseopilot-ai-modal__btn--primary",onClick:x,disabled:w},w?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"wpseopilot-ai-modal__spinner"}),"Generating..."):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,t.createElement)("circle",{cx:"12",cy:"12",r:"4"})),"Generate"))))):null},g=({metric:e})=>{const a=e.max>0?e.score/e.max*100:0,l=e.is_pass?"pass":e.score>0?"partial":"fail";return(0,t.createElement)("li",{className:`wpseopilot-metric-item wpseopilot-metric-item--${l}`},(0,t.createElement)("div",{className:"wpseopilot-metric-item__header"},(0,t.createElement)("span",{className:`wpseopilot-metric-item__indicator wpseopilot-metric-item__indicator--${l}`}),(0,t.createElement)("span",{className:"wpseopilot-metric-item__label"},e.label),(0,t.createElement)("span",{className:"wpseopilot-metric-item__score"},e.score,"/",e.max)),(0,t.createElement)("div",{className:"wpseopilot-metric-item__status"},e.status),(0,t.createElement)("div",{className:"wpseopilot-metric-item__bar"},(0,t.createElement)("div",{className:`wpseopilot-metric-item__fill wpseopilot-metric-item__fill--${l}`,style:{width:`${a}%`}})))},_=({metrics:e,metricsByCategory:a,hasKeyphrase:l})=>{const o=[{key:"basic",icon:"ðŸ“Š",color:"#2271b1",label:"Basic SEO"},{key:"keyword",icon:"ðŸ”‘",color:"#7c3aed",label:"Keywords"},{key:"structure",icon:"ðŸ“",color:"#059669",label:"Structure"},{key:"links",icon:"ðŸ”—",color:"#ea580c",label:"Links & Media"}],s=l?o:o.filter(e=>"keyword"!==e.key);return(0,t.createElement)("div",{className:"wpseopilot-metrics-breakdown"},s.map(e=>{const l=a?.[e.key];if(!l||0===l.items.length)return null;const o=(e=>{if(!e||0===e.length)return 0;const t=e.reduce((e,t)=>e+(t.score||0),0),a=e.reduce((e,t)=>e+(t.max||0),0);return a>0?Math.round(t/a*100):0})(l.items),s=o>=80?"good":o>=50?"fair":"poor";return(0,t.createElement)("div",{key:e.key,className:"wpseopilot-metric-group"},(0,t.createElement)("div",{className:"wpseopilot-metric-group__header",style:{borderLeftColor:e.color}},(0,t.createElement)("span",{className:"wpseopilot-metric-group__icon"},e.icon),(0,t.createElement)("span",{className:"wpseopilot-metric-group__label"},l.label||e.label),(0,t.createElement)("span",{className:`wpseopilot-metric-group__score wpseopilot-metric-group__score--${s}`},(i=l.items)&&0!==i.length?`${i.reduce((e,t)=>e+(t.score||0),0)}/${i.reduce((e,t)=>e+(t.max||0),0)}`:"0/0")),(0,t.createElement)("ul",{className:"wpseopilot-metric-list"},l.items.map(e=>(0,t.createElement)(g,{key:e.key,metric:e}))));var i}),!l&&(0,t.createElement)("div",{className:"wpseopilot-keyphrase-notice"},(0,t.createElement)("span",{className:"wpseopilot-keyphrase-notice__icon"},"ðŸ’¡"),(0,t.createElement)("div",{className:"wpseopilot-keyphrase-notice__content"},(0,t.createElement)("strong",null,"Add a focus keyphrase"),(0,t.createElement)("p",null,"Set a target keyword to unlock 5 additional optimization checks including keyword density and placement analysis."))))},b=[{id:"standard",name:"Standard",title:"{{post_title}} | {{site_title}}",description:"{{post_excerpt}}"},{id:"keyword",name:"Keyword Focus",title:"{{post_title}} - Guide",description:"Learn about {{post_title}}. {{post_excerpt}}"},{id:"how_to",name:"How-To",title:"How to {{post_title}}",description:"Learn how to {{post_title}} with this guide."},{id:"list",name:"List Post",title:"Best {{post_title}}",description:"Discover the best {{post_title}}. {{post_excerpt}}"}],y=({postId:e,seoMeta:a,updateMeta:l,seoScore:o,effectiveTitle:i,effectiveDescription:p,postUrl:d,postTitle:u,postContent:w,featuredImage:h,hasChanges:g,variables:y,variableValues:k,aiEnabled:N,aiProvider:f="none",aiPilot:x=null})=>{const[C,S]=(0,s.useState)("general"),[M,P]=(0,s.useState)(!1),[L,A]=(0,s.useState)({isOpen:!1,fieldType:"title",onApply:null}),[I,$]=(0,s.useState)(null),[T,W]=(0,s.useState)(!1),[B,O]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&n()({path:`/wpseopilot/v2/indexnow/post-status/${e}`}).then(e=>{e.success&&$(e.data)}).catch(()=>{})},[e]);const F=(0,s.useCallback)(async()=>{if(e&&!T){W(!0),O(null);try{const t=await n()({path:`/wpseopilot/v2/indexnow/submit-post/${e}`,method:"POST"});if(t.success){const t=await n()({path:`/wpseopilot/v2/indexnow/post-status/${e}`});t.success&&$(t.data)}else O(t.message||"Failed to submit for indexing")}catch(e){O(e.message||"Failed to submit for indexing")}finally{W(!1)}}},[e,T]),R=(0,s.useCallback)(e=>{l("title",e.title),l("description",e.description),P(!1)},[l]),V=((a.title||"").length,(a.description||"").length,(0,s.useCallback)((e,t)=>{A({isOpen:!0,fieldType:e,onApply:t})},[])),U=(0,s.useCallback)(()=>{A({isOpen:!1,fieldType:"title",onApply:null})},[]),j=(0,s.useCallback)(e=>{L.onApply&&e&&L.onApply(e),U()},[L,U]);return(0,t.createElement)("div",{className:"wpseopilot-editor-panel"},(0,t.createElement)("div",{className:"wpseopilot-score-header"},(0,t.createElement)(m,{score:o?.score||0,level:o?.level||"poor"}),(0,t.createElement)("div",{className:"wpseopilot-score-info"},(0,t.createElement)("div",{className:"wpseopilot-score-label"},"SEO Score"),(0,t.createElement)("div",{className:"wpseopilot-score-status"},o?.issues?.length>0?`${o.issues.length} issue${1!==o.issues.length?"s":""} found`:"Looking good!"),!a.focus_keyphrase&&(0,t.createElement)("div",{className:"wpseopilot-keyphrase-hint"},"Add keyphrases for full analysis"),a.focus_keyphrase&&a.secondary_keyphrases?.length>0&&(0,t.createElement)("div",{className:"wpseopilot-keyphrase-hint",style:{color:"#00a32a"}},1+a.secondary_keyphrases.length," keywords tracked"))),(0,t.createElement)("div",{className:"wpseopilot-tabs"},(0,t.createElement)("button",{type:"button",className:"wpseopilot-tab "+("general"===C?"active":""),onClick:()=>S("general")},"General"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-tab "+("analysis"===C?"active":""),onClick:()=>S("analysis")},"Analysis"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-tab "+("advanced"===C?"active":""),onClick:()=>S("advanced")},"Advanced"),(0,t.createElement)("button",{type:"button",className:"wpseopilot-tab "+("social"===C?"active":""),onClick:()=>S("social")},"Social")),"general"===C&&(0,t.createElement)("div",{className:"wpseopilot-tab-content"},(0,t.createElement)("div",{className:"wpseopilot-preview-section"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Search Preview"),(0,t.createElement)(c,{title:i,description:p,url:d})),(0,t.createElement)("div",{className:"wpseopilot-field wpseopilot-field--keyphrases"},(0,t.createElement)("div",{className:"wpseopilot-field-header"},(0,t.createElement)("label",null,"Focus Keyphrases"),(0,t.createElement)("span",{className:"wpseopilot-field-count"},1+(a.secondary_keyphrases?.length||0),"/5")),(0,t.createElement)("div",{className:"wpseopilot-keyphrase-item wpseopilot-keyphrase-primary"},(0,t.createElement)("span",{className:"wpseopilot-keyphrase-badge"},"Primary"),(0,t.createElement)("input",{type:"text",className:"wpseopilot-field-input",value:a.focus_keyphrase||"",onChange:e=>l("focus_keyphrase",e.target.value),placeholder:"Enter your main target keyword"})),(a.secondary_keyphrases||[]).map((e,o)=>(0,t.createElement)("div",{key:o,className:"wpseopilot-keyphrase-item wpseopilot-keyphrase-secondary"},(0,t.createElement)("span",{className:"wpseopilot-keyphrase-badge"},"#",o+2),(0,t.createElement)("input",{type:"text",className:"wpseopilot-field-input",value:e,onChange:e=>{const t=[...a.secondary_keyphrases||[]];t[o]=e.target.value,l("secondary_keyphrases",t)},placeholder:`Secondary keyword ${o+1}`}),(0,t.createElement)("button",{type:"button",className:"wpseopilot-keyphrase-remove",onClick:()=>{const e=(a.secondary_keyphrases||[]).filter((e,t)=>t!==o);l("secondary_keyphrases",e)},"aria-label":"Remove keyphrase"},"Ã—"))),(a.secondary_keyphrases?.length||0)<4&&(0,t.createElement)("button",{type:"button",className:"wpseopilot-keyphrase-add",onClick:()=>{const e=a.secondary_keyphrases||[];l("secondary_keyphrases",[...e,""])}},(0,t.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,t.createElement)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),"Add Secondary Keyphrase"),(0,t.createElement)("p",{className:"wpseopilot-field-help"},"Add up to 5 keyphrases to optimize your content for multiple search terms")),(0,t.createElement)("div",{className:"wpseopilot-field wpseopilot-field--templates"},(0,t.createElement)("div",{className:"wpseopilot-templates-header"},(0,t.createElement)("button",{type:"button",className:"wpseopilot-templates-toggle "+(M?"active":""),onClick:()=>P(!M)},(0,t.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,t.createElement)("path",{d:"M7 7h10M7 12h10M7 17h6"})),"Quick Templates",(0,t.createElement)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:M?"rotate(180deg)":"none",transition:"transform 0.15s"}},(0,t.createElement)("polyline",{points:"6 9 12 15 18 9"})))),M&&(0,t.createElement)("div",{className:"wpseopilot-templates-list"},b.map(e=>(0,t.createElement)("button",{key:e.id,type:"button",className:"wpseopilot-template-item",onClick:()=>R(e)},(0,t.createElement)("span",{className:"wpseopilot-template-name"},e.name),(0,t.createElement)("span",{className:"wpseopilot-template-preview"},e.title))))),(0,t.createElement)(E,{label:"SEO Title",id:"wpseopilot-seo-title",value:a.title||"",onChange:e=>l("title",e),placeholder:u||"Enter SEO title",maxLength:60,variables:y,variableValues:k,context:"post",showAiButton:!0,aiEnabled:N,onAiClick:()=>V("title",e=>l("title",e))}),(0,t.createElement)(E,{label:"Meta Description",id:"wpseopilot-meta-desc",value:a.description||"",onChange:e=>l("description",e),placeholder:"Enter meta description",maxLength:160,multiline:!0,variables:y,variableValues:k,context:"post",showAiButton:!0,aiEnabled:N,onAiClick:()=>V("description",e=>l("description",e))}),o?.issues?.length>0&&(0,t.createElement)("div",{className:"wpseopilot-issues"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Issues"),(0,t.createElement)("ul",{className:"wpseopilot-issues-list"},o.issues.slice(0,5).map((e,a)=>(0,t.createElement)("li",{key:a,className:`wpseopilot-issue wpseopilot-issue--${e.severity||"warning"}`},(0,t.createElement)("span",{className:"wpseopilot-issue-icon"},"high"===e.severity?"!":"?"),(0,t.createElement)("span",{className:"wpseopilot-issue-text"},e.message)))),o.issues.length>5&&(0,t.createElement)("button",{type:"button",className:"wpseopilot-view-all-link",onClick:()=>S("analysis")},"View all ",o.issues.length," issues â†’"))),"analysis"===C&&(0,t.createElement)("div",{className:"wpseopilot-tab-content"},(0,t.createElement)(_,{metrics:o?.metrics||[],metricsByCategory:o?.metrics_by_category,hasKeyphrase:!!a.focus_keyphrase})),"advanced"===C&&(0,t.createElement)("div",{className:"wpseopilot-tab-content"},(0,t.createElement)("div",{className:"wpseopilot-field"},(0,t.createElement)("div",{className:"wpseopilot-field-header"},(0,t.createElement)("label",null,"Canonical URL")),(0,t.createElement)("input",{type:"url",className:"wpseopilot-field-input",value:a.canonical||"",onChange:e=>l("canonical",e.target.value),placeholder:d}),(0,t.createElement)("p",{className:"wpseopilot-field-help"},"Leave empty to use the default URL")),(0,t.createElement)("div",{className:"wpseopilot-robots-section"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Search Engine Visibility"),(0,t.createElement)("label",{className:"wpseopilot-toggle"},(0,t.createElement)("input",{type:"checkbox",checked:a.noindex||!1,onChange:e=>l("noindex",e.target.checked)}),(0,t.createElement)("span",{className:"wpseopilot-toggle-slider"}),(0,t.createElement)("span",{className:"wpseopilot-toggle-label"},"Hide from search results",(0,t.createElement)("small",null,"Add noindex meta tag"))),(0,t.createElement)("label",{className:"wpseopilot-toggle"},(0,t.createElement)("input",{type:"checkbox",checked:a.nofollow||!1,onChange:e=>l("nofollow",e.target.checked)}),(0,t.createElement)("span",{className:"wpseopilot-toggle-slider"}),(0,t.createElement)("span",{className:"wpseopilot-toggle-label"},"Don't follow links",(0,t.createElement)("small",null,"Add nofollow meta tag")))),(0,t.createElement)("div",{className:"wpseopilot-robots-preview"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Robots Meta"),(0,t.createElement)("code",{className:"wpseopilot-robots-code"},a.noindex||a.nofollow?`${a.noindex?"noindex":"index"}, ${a.nofollow?"nofollow":"follow"}`:"index, follow (default)")),(0,t.createElement)("div",{className:"wpseopilot-indexing-section"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Instant Indexing"),I&&!I.indexnow_enabled&&(0,t.createElement)("div",{className:"wpseopilot-indexing-notice wpseopilot-indexing-notice--info"},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("path",{d:"M12 16v-4M12 8h.01"})),(0,t.createElement)("span",null,"Enable IndexNow in Settings to use instant indexing")),I&&I.indexnow_enabled&&(0,t.createElement)(t.Fragment,null,I.has_been_indexed&&I.last_submission&&(0,t.createElement)("div",{className:`wpseopilot-indexing-status wpseopilot-indexing-status--${I.last_submission.status}`},(0,t.createElement)("div",{className:"wpseopilot-indexing-status-icon"},"success"===I.last_submission.status?(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M20 6L9 17l-5-5"})):(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("path",{d:"M15 9l-6 6M9 9l6 6"}))),(0,t.createElement)("div",{className:"wpseopilot-indexing-status-text"},(0,t.createElement)("strong",null,"success"===I.last_submission.status?"Submitted":"Failed"),(0,t.createElement)("span",null,I.last_submission.time_ago))),!I.has_been_indexed&&(0,t.createElement)("div",{className:"wpseopilot-indexing-status wpseopilot-indexing-status--never"},(0,t.createElement)("div",{className:"wpseopilot-indexing-status-icon"},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.createElement)("path",{d:"M12 6v6l4 2"}))),(0,t.createElement)("div",{className:"wpseopilot-indexing-status-text"},(0,t.createElement)("strong",null,"Not submitted"),(0,t.createElement)("span",null,"Request indexing to notify search engines"))),B&&(0,t.createElement)("div",{className:"wpseopilot-indexing-notice wpseopilot-indexing-notice--error"},B),(0,t.createElement)(r.Button,{variant:"secondary",className:"wpseopilot-indexing-button",onClick:F,disabled:T},T?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"wpseopilot-indexing-spinner"}),"Submitting..."):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,t.createElement)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})),"Request Indexing")),(0,t.createElement)("p",{className:"wpseopilot-field-help"},"Submit this URL to search engines via IndexNow for faster discovery.",I.total_submissions>0&&(0,t.createElement)(t.Fragment,null," Submitted ",I.total_submissions," time",1!==I.total_submissions?"s":"","."))))),"social"===C&&(0,t.createElement)("div",{className:"wpseopilot-tab-content"},(0,t.createElement)("div",{className:"wpseopilot-social-preview"},(0,t.createElement)("label",{className:"wpseopilot-section-label"},"Social Preview"),(0,t.createElement)("div",{className:"wpseopilot-social-card"},(0,t.createElement)("div",{className:"wpseopilot-social-image"},a.og_image||h?(0,t.createElement)("img",{src:a.og_image||h,alt:""}):(0,t.createElement)("div",{className:"wpseopilot-social-placeholder"},(0,t.createElement)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},(0,t.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,t.createElement)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,t.createElement)("path",{d:"M21 15l-5-5L5 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),(0,t.createElement)("span",null,"No image set"))),(0,t.createElement)("div",{className:"wpseopilot-social-content"},(0,t.createElement)("div",{className:"wpseopilot-social-url"},new URL(d).hostname),(0,t.createElement)("div",{className:"wpseopilot-social-title"},i),(0,t.createElement)("div",{className:"wpseopilot-social-desc"},p||"No description available")))),(0,t.createElement)("div",{className:"wpseopilot-field"},(0,t.createElement)("div",{className:"wpseopilot-field-header"},(0,t.createElement)("label",null,"Social Image URL")),(0,t.createElement)("input",{type:"url",className:"wpseopilot-field-input",value:a.og_image||"",onChange:e=>l("og_image",e.target.value),placeholder:"https://..."}),(0,t.createElement)("p",{className:"wpseopilot-field-help"},"1200x630 recommended. Leave empty to use featured image."),!a.og_image&&h&&(0,t.createElement)("p",{className:"wpseopilot-field-note"},"Using featured image as fallback")),(0,t.createElement)(r.Button,{variant:"secondary",className:"wpseopilot-media-button",onClick:()=>{const e=wp.media({title:"Select Social Image",button:{text:"Use Image"},multiple:!1});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();l("og_image",t.url)}),e.open()}},(0,t.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"6px"}},(0,t.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,t.createElement)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,t.createElement)("path",{d:"M21 15l-5-5L5 21",stroke:"currentColor",strokeWidth:"2"})),"Select Image")),(0,t.createElement)(v,{isOpen:L.isOpen,onClose:U,onGenerate:j,fieldType:L.fieldType,currentValue:"title"===L.fieldType?a.title:a.description,postTitle:u,postContent:w,variableValues:k,aiProvider:f,aiPilot:x}))},k=()=>(0,t.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z",fill:"currentColor"})),N=window.wpseopilotEditor||{},f=N.variables||{},x=N.aiEnabled||!1,C=N.aiProvider||"none",S=N.aiPilot||null;(0,a.registerPlugin)("wpseopilot",{render:()=>{const[e,a]=(0,s.useState)({title:"",description:"",canonical:"",noindex:!1,nofollow:!1,og_image:"",focus_keyphrase:""}),[i,r]=(0,s.useState)(null),[c,p]=(0,s.useState)(!1),[m,d]=(0,s.useState)(!1),[u,w]=(0,s.useState)({}),{postId:h,postTitle:E,postExcerpt:v,postContent:g,postType:_,postSlug:b,featuredImage:M}=(0,o.useSelect)(e=>{const t=e("core/editor"),a=t.getCurrentPost(),l=t.getEditedPostAttribute("featured_media");let o="";if(l){const t=e("core").getMedia(l);t&&(o=t.source_url)}return{postId:t.getCurrentPostId(),postTitle:t.getEditedPostAttribute("title")||"",postExcerpt:t.getEditedPostAttribute("excerpt")||"",postContent:t.getEditedPostContent()||"",postType:t.getCurrentPostType(),postSlug:a?.slug||"",featuredImage:o}},[]),{editPost:P}=(0,o.useDispatch)("core/editor");(0,s.useEffect)(()=>{if(!h||!_)return;const e={post:"posts",page:"pages",attachment:"media"}[t=_]||t;var t;n()({path:`/wp/v2/${e}/${h}`}).then(e=>{if(e.meta&&e.meta._wpseopilot_meta){const t=e.meta._wpseopilot_meta;a({title:t.title||"",description:t.description||"",canonical:t.canonical||"",noindex:"1"===t.noindex,nofollow:"1"===t.nofollow,og_image:t.og_image||"",focus_keyphrase:t.focus_keyphrase||""})}}).catch(()=>{})},[h,_]),(0,s.useEffect)(()=>{if(!h)return;const e=setTimeout(()=>{n()({path:`/wpseopilot/v2/audit/post/${h}`}).then(e=>{e.success&&e.data&&r(e.data)}).catch(()=>{})},500);return()=>clearTimeout(e)},[h,e,E,g]),(0,s.useEffect)(()=>{const e={post_title:E||"",post_excerpt:v||"",site_title:N.siteTitle||"",tagline:N.tagline||"",separator:N.separator||"-",current_year:(new Date).getFullYear().toString()};w(e)},[E,v]);const L=(0,s.useCallback)((t,l)=>{a(e=>({...e,[t]:l})),d(!0);const o={...e,[t]:l},s={title:o.title,description:o.description,canonical:o.canonical,noindex:o.noindex?"1":"",nofollow:o.nofollow?"1":"",og_image:o.og_image,focus_keyphrase:o.focus_keyphrase};P({meta:{_wpseopilot_meta:s}})},[e,P]),A=e.title||E||"Untitled",I=e.description||v||"",$=window.location.origin,T=b?`${$}/${b}/`:$;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.PluginSidebarMoreMenuItem,{target:"wpseopilot-sidebar",icon:(0,t.createElement)(k,null)},"WP SEO Pilot"),(0,t.createElement)(l.PluginSidebar,{name:"wpseopilot-sidebar",title:"WP SEO Pilot",icon:(0,t.createElement)(k,null)},(0,t.createElement)(y,{postId:h,seoMeta:e,updateMeta:L,seoScore:i,effectiveTitle:A,effectiveDescription:I,postUrl:T,postTitle:E,postContent:g,featuredImage:M,hasChanges:m,variables:f,variableValues:u,aiEnabled:x,aiProvider:C,aiPilot:S})))},icon:(0,t.createElement)(k,null)})})();