(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var s in t)e.o(t,s)&&!e.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:t[s]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React,t=window.wp.plugins,s=window.wp.editPost,l=window.wp.data,n=window.wp.element,o=window.wp.apiFetch;var r=e.n(o);const i=window.wp.components,c=({title:e,description:t,url:s})=>{const l=e.length>60?e.substring(0,57)+"...":e,n=t.length>160?t.substring(0,157)+"...":t||"No description provided. Add a meta description to control what appears here.";return(0,a.createElement)("div",{className:"samanlabs-seo-search-preview"},(0,a.createElement)("div",{className:"samanlabs-seo-search-preview__breadcrumb"},(0,a.createElement)("div",{className:"samanlabs-seo-search-preview__favicon"},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,a.createElement)("path",{d:"M12 6v6l4 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}))),(0,a.createElement)("div",{className:"samanlabs-seo-search-preview__url-container"},(0,a.createElement)("span",{className:"samanlabs-seo-search-preview__site-name"},(()=>{try{return new URL(s).hostname.replace("www.","")}catch{return"example.com"}})()),(0,a.createElement)("span",{className:"samanlabs-seo-search-preview__url"},(e=>{try{const a=new URL(e),t="/"===a.pathname?"":a.pathname;return`${a.hostname}${t}`}catch{return e}})(s))),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-search-preview__menu","aria-label":"More options"},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},(0,a.createElement)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,a.createElement)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,a.createElement)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})))),(0,a.createElement)("h3",{className:"samanlabs-seo-search-preview__title"},l||"Page Title"),(0,a.createElement)("p",{className:"samanlabs-seo-search-preview__description"},n))},m={excellent:"#00a32a",good:"#00a32a",fair:"#dba617",poor:"#d63638"},d=({score:e=0,level:t="poor"})=>{const s=m[t]||m.poor,l=2*Math.PI*20,n=l-e/100*l;return(0,a.createElement)("div",{className:"samanlabs-seo-gauge"},(0,a.createElement)("svg",{viewBox:"0 0 48 48",className:"samanlabs-seo-gauge__svg"},(0,a.createElement)("circle",{className:"samanlabs-seo-gauge__bg",cx:"24",cy:"24",r:"20",fill:"none",strokeWidth:"4"}),(0,a.createElement)("circle",{className:"samanlabs-seo-gauge__progress",cx:"24",cy:"24",r:"20",fill:"none",strokeWidth:"4",strokeDasharray:l,strokeDashoffset:n,strokeLinecap:"round",style:{stroke:s}})),(0,a.createElement)("div",{className:"samanlabs-seo-gauge__value",style:{color:s}},e))},p=({variables:e={},onSelect:t,context:s="post",buttonLabel:l="Variables",disabled:o=!1,compact:r=!1,isOpen:i,onToggle:c,onClose:m})=>{const[d,p]=(0,n.useState)(!1),[b,u]=(0,n.useState)(""),h=(0,n.useRef)(null),E=void 0!==i?i:d,v=e=>{void 0!==i?e?c?.():m?.():p(e)};(0,n.useEffect)(()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&v(!1)};return E&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[E,i]);const g=e=>{t&&t(`{{${e.tag}}}`),v(!1),u("")},_=()=>{void 0!==i?c?.():p(!d)},y=E?(()=>{const a={},t={global:["global"],post:["global","post"],taxonomy:["global","taxonomy"],archive:["global","archive","author"],author:["global","author"],date:["global","archive"],search:["global"],404:["global"]}[s]||["global","post"];return Object.entries(e).forEach(([e,s])=>{if(!t.includes(e))return;const l=(s.vars||[]).filter(e=>{if(!b)return!0;const a=b.toLowerCase();return e.tag.toLowerCase().includes(a)||e.label.toLowerCase().includes(a)||e.desc&&e.desc.toLowerCase().includes(a)});l.length>0&&(a[e]={...s,vars:l})}),a})():{};return r?(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker samanlabs-seo-variable-picker--compact",ref:h},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-template-input__action-btn samanlabs-seo-template-input__action-btn--vars",onClick:_,disabled:o,title:"Insert variable"},(0,a.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,a.createElement)("path",{d:"M4 7h3a1 1 0 0 0 1-1V3"}),(0,a.createElement)("path",{d:"M20 7h-3a1 1 0 0 1-1-1V3"}),(0,a.createElement)("path",{d:"M4 17h3a1 1 0 0 1 1 1v3"}),(0,a.createElement)("path",{d:"M20 17h-3a1 1 0 0 0-1 1v3"}),(0,a.createElement)("path",{d:"M9 12h6"}),(0,a.createElement)("path",{d:"M12 9v6"}))),E&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__dropdown"},(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__search"},(0,a.createElement)("input",{type:"text",placeholder:"Search variables...",value:b,onChange:e=>u(e.target.value),autoFocus:!0})),(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__groups"},Object.entries(y).map(([e,t])=>(0,a.createElement)("div",{key:e,className:"samanlabs-seo-variable-picker__group"},(0,a.createElement)("div",{className:`samanlabs-seo-variable-picker__group-label samanlabs-seo-variable-picker__group-label--${e}`},t.label),(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__items"},t.vars.map(t=>(0,a.createElement)("button",{key:t.tag,type:"button",className:"samanlabs-seo-variable-picker__item",onClick:()=>g(t)},(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__item-header"},(0,a.createElement)("code",{className:`samanlabs-seo-variable-picker__tag samanlabs-seo-variable-picker__tag--${e}`},t.tag),(0,a.createElement)("span",{className:"samanlabs-seo-variable-picker__label"},t.label)),t.preview&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__preview"},t.preview)))))),0===Object.keys(y).length&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__empty"},"No variables found")))):(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker",ref:h},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-variable-picker__trigger",onClick:_,disabled:o,title:"Insert variable"},(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:"16",height:"16"},(0,a.createElement)("path",{fillRule:"evenodd",d:"M4.5 2A2.5 2.5 0 002 4.5v3.879a2.5 2.5 0 00.732 1.767l7.5 7.5a2.5 2.5 0 003.536 0l3.878-3.878a2.5 2.5 0 000-3.536l-7.5-7.5A2.5 2.5 0 008.38 2H4.5zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),(0,a.createElement)("span",null,l)),E&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__dropdown"},(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__search"},(0,a.createElement)("input",{type:"text",placeholder:"Search variables...",value:b,onChange:e=>u(e.target.value),autoFocus:!0})),(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__groups"},Object.entries(y).map(([e,t])=>(0,a.createElement)("div",{key:e,className:"samanlabs-seo-variable-picker__group"},(0,a.createElement)("div",{className:`samanlabs-seo-variable-picker__group-label samanlabs-seo-variable-picker__group-label--${e}`},t.label),(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__items"},t.vars.map(t=>(0,a.createElement)("button",{key:t.tag,type:"button",className:"samanlabs-seo-variable-picker__item",onClick:()=>g(t)},(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__item-header"},(0,a.createElement)("code",{className:`samanlabs-seo-variable-picker__tag samanlabs-seo-variable-picker__tag--${e}`},t.tag),(0,a.createElement)("span",{className:"samanlabs-seo-variable-picker__label"},t.label)),t.preview&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__preview"},t.preview)))))),0===Object.keys(y).length&&(0,a.createElement)("div",{className:"samanlabs-seo-variable-picker__empty"},"No variables found"))))},b={site_title:"global",tagline:"global",site_url:"global",separator:"separator",current_year:"global",current_month:"global",current_day:"global",post_title:"post",post_excerpt:"post",post_date:"post",post_modified:"post",post_author:"post",post_id:"post",post_content:"post",term_title:"taxonomy",term_description:"taxonomy",term_count:"taxonomy",author_name:"author",author_bio:"author",archive_title:"archive",search_query:"archive",page_number:"archive"},u=e=>{const a=e.indexOf("|");return a>-1?e.substring(0,a).trim():e.trim()},h=e=>{const a=u(e);return b[a]||"global"},E=({value:e="",onChange:t,placeholder:s="",variables:l={},variableValues:o={},context:r="post",multiline:i=!1,maxLength:c=null,label:m="",helpText:d="",id:b,disabled:E=!1,onAiClick:v=null,showAiButton:g=!0,aiEnabled:_=!0})=>{const y=(0,n.useRef)(null),k=(0,n.useRef)(null),[N,f]=(0,n.useState)(!1),[w,x]=(0,n.useState)(!1),[C,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=y.current,a=k.current;if(!e||!a)return;const t=()=>{a.scrollTop=e.scrollTop,a.scrollLeft=e.scrollLeft};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]);const M=(0,n.useMemo)(()=>{if(!e)return[];const a=[];let t=0;const s=/\{\{([^}]+)\}\}/g;let l;for(;null!==(l=s.exec(e));){l.index>t&&a.push({type:"text",content:e.slice(t,l.index)});const n=l[1].trim(),r=u(n),i=h(r),c=o[r]||o[`{{${r}}}`];a.push({type:"variable",fullTag:n,baseTag:r,raw:l[0],preview:c||r,varType:i}),t=s.lastIndex}return t<e.length&&a.push({type:"text",content:e.slice(t)}),a},[e,o]),P=e.length,L=c&&P>c,A=i?"textarea":"input";return(0,a.createElement)("div",{className:`samanlabs-seo-template-input ${N?"is-focused":""} ${E?"is-disabled":""}`},m&&(0,a.createElement)("div",{className:"samanlabs-seo-template-input__header"},(0,a.createElement)("label",{className:"samanlabs-seo-template-input__label",htmlFor:b},m),c&&(0,a.createElement)("span",{className:"samanlabs-seo-template-input__counter "+(L?"over-limit":P>0?"has-value":"")},P,"/",c)),(0,a.createElement)("div",{className:"samanlabs-seo-template-input__container"},(0,a.createElement)("div",{ref:k,className:"samanlabs-seo-template-input__highlight "+(i?"multiline":""),"aria-hidden":"true"},M.map((e,t)=>"variable"===e.type?(0,a.createElement)("span",{key:t,className:`samanlabs-seo-template-input__var samanlabs-seo-template-input__var--${e.varType}`,onMouseEnter:()=>S({...e,index:t}),onMouseLeave:()=>S(null)},(0,a.createElement)("span",{className:"samanlabs-seo-template-input__bracket"},"{"),(0,a.createElement)("span",{className:"samanlabs-seo-template-input__bracket"},"{"),(0,a.createElement)("span",{className:"samanlabs-seo-template-input__tag"},e.fullTag),(0,a.createElement)("span",{className:"samanlabs-seo-template-input__bracket"},"}"),(0,a.createElement)("span",{className:"samanlabs-seo-template-input__bracket"},"}"),C?.index===t&&e.preview&&(0,a.createElement)("span",{className:"samanlabs-seo-template-input__tooltip"},e.preview)):(0,a.createElement)("span",{key:t},e.content)),!e&&(0,a.createElement)("span",{className:"samanlabs-seo-template-input__placeholder"},s)),(0,a.createElement)(A,{ref:y,id:b,type:i?void 0:"text",className:"samanlabs-seo-template-input__field "+(i?"multiline":""),value:e,onChange:e=>t(e.target.value),onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:"",disabled:E,rows:i?3:void 0}),(0,a.createElement)("div",{className:"samanlabs-seo-template-input__actions"},g&&(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-template-input__action-btn samanlabs-seo-template-input__action-btn--ai "+(_?"":"is-disabled"),onClick:()=>{_&&v?v():_||window.confirm("AI features require WP AI Pilot to be configured.\n\nWould you like to open the AI settings now?")&&window.open("admin.php?page=wp-ai-pilot","_blank")},disabled:E,title:"Generate with AI"},(0,a.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,a.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,a.createElement)("circle",{cx:"12",cy:"12",r:"4"}))),(0,a.createElement)(p,{variables:l,context:r,onSelect:a=>{const s=y.current;if(!s)return void t(e+a);const l=s.selectionStart,n=s.selectionEnd,o=e.slice(0,l)+a+e.slice(n);t(o),x(!1),requestAnimationFrame(()=>{const e=l+a.length;s.setSelectionRange(e,e),s.focus()})},disabled:E,isOpen:w,onToggle:()=>x(!w),onClose:()=>x(!1),compact:!0}))),d&&(0,a.createElement)("div",{className:"samanlabs-seo-template-input__footer"},(0,a.createElement)("span",{className:"samanlabs-seo-template-input__help"},d)))},v=({isOpen:e,onClose:t,onGenerate:s,fieldType:l="title",currentValue:o="",variableValues:i={},context:c={},postTitle:m="",postContent:d="",aiProvider:p="none",aiPilot:b=null})=>{const[u,h]=(0,n.useState)(!1),[E,v]=(0,n.useState)(null),[g,_]=(0,n.useState)(!0),[y,k]=(0,n.useState)(""),[N,f]=(0,n.useState)(null),w=(0,n.useCallback)(()=>{if(!g)return"";const e=[];m&&e.push(`Post title: ${m}`),c.type&&e.push(`Content type: ${c.type}`);const a=Object.entries(i).filter(([e,a])=>a&&"string"==typeof a).map(([e,a])=>`${e.replace(/_/g," ")}: ${a}`);if(a.length>0&&e.push(...a),d){const a=d.replace(/<[^>]*>/g,"").substring(0,500);a&&e.push(`Content preview: ${a}...`)}return e.join("\n")},[g,i,c,m,d]),x=async()=>{h(!0),v(null),f(null);try{let e="";e=y?y+"\n\n"+w():w()||"Generate SEO metadata for a website.",e+="title"===l?"\n\nGenerate an SEO-optimized title (max 60 characters).":"\n\nGenerate an SEO-optimized meta description (max 155 characters).";const a=await r()({path:"/samanlabs-seo/v1/ai/generate",method:"POST",data:{content:e,type:l}});if(a.success&&a.data){const e="title"===l?a.data.title:a.data.description;f(e)}else v(a.message||"Failed to generate content")}catch(e){v(e.message||"An error occurred during generation")}finally{h(!1)}},C=()=>{f(null),v(null),k(""),t()};return e?"none"===p?(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal-overlay",onClick:C},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal samanlabs-seo-ai-modal--notice",onClick:e=>e.stopPropagation()},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__header"},(0,a.createElement)("h3",null,(0,a.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.createElement)("path",{d:"M12 8v4m0 4h.01"})),"AI Not Configured"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__close",onClick:C,"aria-label":"Close"},(0,a.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M18 6L6 18M6 6l12 12"})))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__body"},b?.installed?(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice samanlabs-seo-ai-notice--warning"},(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice__icon"},(0,a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice__content"},(0,a.createElement)("h4",null,"WP AI Pilot Needs Configuration"),(0,a.createElement)("p",null,"WP AI Pilot is installed but not yet configured. Add an API key to enable AI-powered SEO suggestions."))):(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice samanlabs-seo-ai-notice--info"},(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice__icon"},(0,a.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-notice__content"},(0,a.createElement)("h4",null,"Enhance with WP AI Pilot"),(0,a.createElement)("p",null,"Install WP AI Pilot to unlock AI-powered title and meta description generation.")))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__footer"},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--secondary",onClick:C},"Cancel"),b?.installed?(0,a.createElement)("a",{href:b.settingsUrl,className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--primary"},"Configure WP AI Pilot"):(0,a.createElement)("a",{href:"/wp-admin/plugin-install.php?s=wp+ai+pilot&tab=search",className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--primary"},"Install WP AI Pilot")))):(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal-overlay",onClick:C},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal",onClick:e=>e.stopPropagation()},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__header"},(0,a.createElement)("h3",null,(0,a.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,a.createElement)("circle",{cx:"12",cy:"12",r:"4"})),"Generate ","title"===l?"Title":"Description"),"wp-ai-pilot"===p&&(0,a.createElement)("span",{className:"samanlabs-seo-ai-badge"},(0,a.createElement)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),"WP AI Pilot"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__close",onClick:C,"aria-label":"Close"},(0,a.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M18 6L6 18M6 6l12 12"})))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__body"},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__option"},(0,a.createElement)("label",{className:"samanlabs-seo-ai-modal__checkbox"},(0,a.createElement)("input",{type:"checkbox",checked:g,onChange:e=>_(e.target.checked)}),(0,a.createElement)("span",{className:"samanlabs-seo-ai-modal__checkbox-label"},"Include post content as context"))),g&&m&&(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__context-preview"},(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__context-item"},(0,a.createElement)("span",{className:"samanlabs-seo-ai-modal__context-key"},"Post:"),(0,a.createElement)("span",{className:"samanlabs-seo-ai-modal__context-value"},m))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__field"},(0,a.createElement)("label",{htmlFor:"ai-custom-prompt"},"Custom instructions (optional)"),(0,a.createElement)("textarea",{id:"ai-custom-prompt",value:y,onChange:e=>k(e.target.value),placeholder:`e.g., "Focus on ${"title"===l?"including keywords":"highlighting benefits"}"`,rows:2})),E&&(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__error"},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.createElement)("path",{d:"M12 8v4m0 4h.01"})),E),N&&(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__result"},(0,a.createElement)("label",null,"Generated ","title"===l?"title":"description",":"),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__result-box"},(0,a.createElement)("p",null,N),(0,a.createElement)("span",{className:"samanlabs-seo-ai-modal__char-count"},N.length," characters")))),(0,a.createElement)("div",{className:"samanlabs-seo-ai-modal__footer"},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--secondary",onClick:C},"Cancel"),N?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__btn",onClick:x,disabled:u},"Regenerate"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--primary",onClick:()=>{N&&(s(N),C())}},"Apply")):(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-ai-modal__btn samanlabs-seo-ai-modal__btn--primary",onClick:x,disabled:u},u?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"samanlabs-seo-ai-modal__spinner"}),"Generating..."):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M12 3v1m0 16v1m-9-9h1m16 0h1m-2.636-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707"}),(0,a.createElement)("circle",{cx:"12",cy:"12",r:"4"})),"Generate"))))):null},g=({metric:e})=>{const t=e.max>0?e.score/e.max*100:0,s=e.is_pass?"pass":e.score>0?"partial":"fail";return(0,a.createElement)("li",{className:`samanlabs-seo-metric-item samanlabs-seo-metric-item--${s}`},(0,a.createElement)("div",{className:"samanlabs-seo-metric-item__header"},(0,a.createElement)("span",{className:`samanlabs-seo-metric-item__indicator samanlabs-seo-metric-item__indicator--${s}`}),(0,a.createElement)("span",{className:"samanlabs-seo-metric-item__label"},e.label),(0,a.createElement)("span",{className:"samanlabs-seo-metric-item__score"},e.score,"/",e.max)),(0,a.createElement)("div",{className:"samanlabs-seo-metric-item__status"},e.status),(0,a.createElement)("div",{className:"samanlabs-seo-metric-item__bar"},(0,a.createElement)("div",{className:`samanlabs-seo-metric-item__fill samanlabs-seo-metric-item__fill--${s}`,style:{width:`${t}%`}})))},_=({metrics:e,metricsByCategory:t,hasKeyphrase:s})=>{const l=[{key:"basic",icon:"ðŸ“Š",color:"#2271b1",label:"Basic SEO"},{key:"keyword",icon:"ðŸ”‘",color:"#7c3aed",label:"Keywords"},{key:"structure",icon:"ðŸ“",color:"#059669",label:"Structure"},{key:"links",icon:"ðŸ”—",color:"#ea580c",label:"Links & Media"}],n=s?l:l.filter(e=>"keyword"!==e.key);return(0,a.createElement)("div",{className:"samanlabs-seo-metrics-breakdown"},n.map(e=>{const s=t?.[e.key];if(!s||0===s.items.length)return null;const l=(e=>{if(!e||0===e.length)return 0;const a=e.reduce((e,a)=>e+(a.score||0),0),t=e.reduce((e,a)=>e+(a.max||0),0);return t>0?Math.round(a/t*100):0})(s.items),n=l>=80?"good":l>=50?"fair":"poor";return(0,a.createElement)("div",{key:e.key,className:"samanlabs-seo-metric-group"},(0,a.createElement)("div",{className:"samanlabs-seo-metric-group__header",style:{borderLeftColor:e.color}},(0,a.createElement)("span",{className:"samanlabs-seo-metric-group__icon"},e.icon),(0,a.createElement)("span",{className:"samanlabs-seo-metric-group__label"},s.label||e.label),(0,a.createElement)("span",{className:`samanlabs-seo-metric-group__score samanlabs-seo-metric-group__score--${n}`},(o=s.items)&&0!==o.length?`${o.reduce((e,a)=>e+(a.score||0),0)}/${o.reduce((e,a)=>e+(a.max||0),0)}`:"0/0")),(0,a.createElement)("ul",{className:"samanlabs-seo-metric-list"},s.items.map(e=>(0,a.createElement)(g,{key:e.key,metric:e}))));var o}),!s&&(0,a.createElement)("div",{className:"samanlabs-seo-keyphrase-notice"},(0,a.createElement)("span",{className:"samanlabs-seo-keyphrase-notice__icon"},"ðŸ’¡"),(0,a.createElement)("div",{className:"samanlabs-seo-keyphrase-notice__content"},(0,a.createElement)("strong",null,"Add a focus keyphrase"),(0,a.createElement)("p",null,"Set a target keyword to unlock 5 additional optimization checks including keyword density and placement analysis."))))},y=[{id:"standard",name:"Standard",title:"{{post_title}} | {{site_title}}",description:"{{post_excerpt}}"},{id:"keyword",name:"Keyword Focus",title:"{{post_title}} - Guide",description:"Learn about {{post_title}}. {{post_excerpt}}"},{id:"how_to",name:"How-To",title:"How to {{post_title}}",description:"Learn how to {{post_title}} with this guide."},{id:"list",name:"List Post",title:"Best {{post_title}}",description:"Discover the best {{post_title}}. {{post_excerpt}}"}],k=({postId:e,seoMeta:t,updateMeta:s,seoScore:l,effectiveTitle:o,effectiveDescription:m,postUrl:p,postTitle:b,postContent:u,featuredImage:h,hasChanges:g,variables:k,variableValues:N,aiEnabled:f,aiProvider:w="none",aiPilot:x=null})=>{const[C,S]=(0,n.useState)("general"),[M,P]=(0,n.useState)(!1),[L,A]=(0,n.useState)({isOpen:!1,fieldType:"title",onApply:null}),[I,$]=(0,n.useState)(null),[T,B]=(0,n.useState)(!1),[W,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{e&&r()({path:`/samanlabs-seo/v1/indexnow/post-status/${e}`}).then(e=>{e.success&&$(e.data)}).catch(()=>{})},[e]);const F=(0,n.useCallback)(async()=>{if(e&&!T){B(!0),O(null);try{const a=await r()({path:`/samanlabs-seo/v1/indexnow/submit-post/${e}`,method:"POST"});if(a.success){const a=await r()({path:`/samanlabs-seo/v1/indexnow/post-status/${e}`});a.success&&$(a.data)}else O(a.message||"Failed to submit for indexing")}catch(e){O(e.message||"Failed to submit for indexing")}finally{B(!1)}}},[e,T]),R=(0,n.useCallback)(e=>{s("title",e.title),s("description",e.description),P(!1)},[s]),V=((t.title||"").length,(t.description||"").length,(0,n.useCallback)((e,a)=>{A({isOpen:!0,fieldType:e,onApply:a})},[])),U=(0,n.useCallback)(()=>{A({isOpen:!1,fieldType:"title",onApply:null})},[]),j=(0,n.useCallback)(e=>{L.onApply&&e&&L.onApply(e),U()},[L,U]);return(0,a.createElement)("div",{className:"samanlabs-seo-editor-panel"},(0,a.createElement)("div",{className:"samanlabs-seo-score-header"},(0,a.createElement)(d,{score:l?.score||0,level:l?.level||"poor"}),(0,a.createElement)("div",{className:"samanlabs-seo-score-info"},(0,a.createElement)("div",{className:"samanlabs-seo-score-label"},"SEO Score"),(0,a.createElement)("div",{className:"samanlabs-seo-score-status"},l?.issues?.length>0?`${l.issues.length} issue${1!==l.issues.length?"s":""} found`:"Looking good!"),!t.focus_keyphrase&&(0,a.createElement)("div",{className:"samanlabs-seo-keyphrase-hint"},"Add keyphrases for full analysis"),t.focus_keyphrase&&t.secondary_keyphrases?.length>0&&(0,a.createElement)("div",{className:"samanlabs-seo-keyphrase-hint",style:{color:"#00a32a"}},1+t.secondary_keyphrases.length," keywords tracked"))),(0,a.createElement)("div",{className:"samanlabs-seo-tabs"},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-tab "+("general"===C?"active":""),onClick:()=>S("general")},"General"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-tab "+("analysis"===C?"active":""),onClick:()=>S("analysis")},"Analysis"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-tab "+("advanced"===C?"active":""),onClick:()=>S("advanced")},"Advanced"),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-tab "+("social"===C?"active":""),onClick:()=>S("social")},"Social")),"general"===C&&(0,a.createElement)("div",{className:"samanlabs-seo-tab-content"},(0,a.createElement)("div",{className:"samanlabs-seo-preview-section"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Search Preview"),(0,a.createElement)(c,{title:o,description:m,url:p})),(0,a.createElement)("div",{className:"samanlabs-seo-field samanlabs-seo-field--keyphrases"},(0,a.createElement)("div",{className:"samanlabs-seo-field-header"},(0,a.createElement)("label",null,"Focus Keyphrases"),(0,a.createElement)("span",{className:"samanlabs-seo-field-count"},1+(t.secondary_keyphrases?.length||0),"/5")),(0,a.createElement)("div",{className:"samanlabs-seo-keyphrase-item samanlabs-seo-keyphrase-primary"},(0,a.createElement)("span",{className:"samanlabs-seo-keyphrase-badge"},"Primary"),(0,a.createElement)("input",{type:"text",className:"samanlabs-seo-field-input",value:t.focus_keyphrase||"",onChange:e=>s("focus_keyphrase",e.target.value),placeholder:"Enter your main target keyword"})),(t.secondary_keyphrases||[]).map((e,l)=>(0,a.createElement)("div",{key:l,className:"samanlabs-seo-keyphrase-item samanlabs-seo-keyphrase-secondary"},(0,a.createElement)("span",{className:"samanlabs-seo-keyphrase-badge"},"#",l+2),(0,a.createElement)("input",{type:"text",className:"samanlabs-seo-field-input",value:e,onChange:e=>{const a=[...t.secondary_keyphrases||[]];a[l]=e.target.value,s("secondary_keyphrases",a)},placeholder:`Secondary keyword ${l+1}`}),(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-keyphrase-remove",onClick:()=>{const e=(t.secondary_keyphrases||[]).filter((e,a)=>a!==l);s("secondary_keyphrases",e)},"aria-label":"Remove keyphrase"},"Ã—"))),(t.secondary_keyphrases?.length||0)<4&&(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-keyphrase-add",onClick:()=>{const e=t.secondary_keyphrases||[];s("secondary_keyphrases",[...e,""])}},(0,a.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.createElement)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),"Add Secondary Keyphrase"),(0,a.createElement)("p",{className:"samanlabs-seo-field-help"},"Add up to 5 keyphrases to optimize your content for multiple search terms")),(0,a.createElement)("div",{className:"samanlabs-seo-field samanlabs-seo-field--templates"},(0,a.createElement)("div",{className:"samanlabs-seo-templates-header"},(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-templates-toggle "+(M?"active":""),onClick:()=>P(!M)},(0,a.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,a.createElement)("path",{d:"M7 7h10M7 12h10M7 17h6"})),"Quick Templates",(0,a.createElement)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:M?"rotate(180deg)":"none",transition:"transform 0.15s"}},(0,a.createElement)("polyline",{points:"6 9 12 15 18 9"})))),M&&(0,a.createElement)("div",{className:"samanlabs-seo-templates-list"},y.map(e=>(0,a.createElement)("button",{key:e.id,type:"button",className:"samanlabs-seo-template-item",onClick:()=>R(e)},(0,a.createElement)("span",{className:"samanlabs-seo-template-name"},e.name),(0,a.createElement)("span",{className:"samanlabs-seo-template-preview"},e.title))))),(0,a.createElement)(E,{label:"SEO Title",id:"samanlabs-seo-seo-title",value:t.title||"",onChange:e=>s("title",e),placeholder:b||"Enter SEO title",maxLength:60,variables:k,variableValues:N,context:"post",showAiButton:!0,aiEnabled:f,onAiClick:()=>V("title",e=>s("title",e))}),(0,a.createElement)(E,{label:"Meta Description",id:"samanlabs-seo-meta-desc",value:t.description||"",onChange:e=>s("description",e),placeholder:"Enter meta description",maxLength:160,multiline:!0,variables:k,variableValues:N,context:"post",showAiButton:!0,aiEnabled:f,onAiClick:()=>V("description",e=>s("description",e))}),l?.issues?.length>0&&(0,a.createElement)("div",{className:"samanlabs-seo-issues"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Issues"),(0,a.createElement)("ul",{className:"samanlabs-seo-issues-list"},l.issues.slice(0,5).map((e,t)=>(0,a.createElement)("li",{key:t,className:`samanlabs-seo-issue samanlabs-seo-issue--${e.severity||"warning"}`},(0,a.createElement)("span",{className:"samanlabs-seo-issue-icon"},"high"===e.severity?"!":"?"),(0,a.createElement)("span",{className:"samanlabs-seo-issue-text"},e.message)))),l.issues.length>5&&(0,a.createElement)("button",{type:"button",className:"samanlabs-seo-view-all-link",onClick:()=>S("analysis")},"View all ",l.issues.length," issues â†’"))),"analysis"===C&&(0,a.createElement)("div",{className:"samanlabs-seo-tab-content"},(0,a.createElement)(_,{metrics:l?.metrics||[],metricsByCategory:l?.metrics_by_category,hasKeyphrase:!!t.focus_keyphrase})),"advanced"===C&&(0,a.createElement)("div",{className:"samanlabs-seo-tab-content"},(0,a.createElement)("div",{className:"samanlabs-seo-field"},(0,a.createElement)("div",{className:"samanlabs-seo-field-header"},(0,a.createElement)("label",null,"Canonical URL")),(0,a.createElement)("input",{type:"url",className:"samanlabs-seo-field-input",value:t.canonical||"",onChange:e=>s("canonical",e.target.value),placeholder:p}),(0,a.createElement)("p",{className:"samanlabs-seo-field-help"},"Leave empty to use the default URL")),(0,a.createElement)("div",{className:"samanlabs-seo-robots-section"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Search Engine Visibility"),(0,a.createElement)("label",{className:"samanlabs-seo-toggle"},(0,a.createElement)("input",{type:"checkbox",checked:t.noindex||!1,onChange:e=>s("noindex",e.target.checked)}),(0,a.createElement)("span",{className:"samanlabs-seo-toggle-slider"}),(0,a.createElement)("span",{className:"samanlabs-seo-toggle-label"},"Hide from search results",(0,a.createElement)("small",null,"Add noindex meta tag"))),(0,a.createElement)("label",{className:"samanlabs-seo-toggle"},(0,a.createElement)("input",{type:"checkbox",checked:t.nofollow||!1,onChange:e=>s("nofollow",e.target.checked)}),(0,a.createElement)("span",{className:"samanlabs-seo-toggle-slider"}),(0,a.createElement)("span",{className:"samanlabs-seo-toggle-label"},"Don't follow links",(0,a.createElement)("small",null,"Add nofollow meta tag")))),(0,a.createElement)("div",{className:"samanlabs-seo-robots-preview"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Robots Meta"),(0,a.createElement)("code",{className:"samanlabs-seo-robots-code"},t.noindex||t.nofollow?`${t.noindex?"noindex":"index"}, ${t.nofollow?"nofollow":"follow"}`:"index, follow (default)")),(0,a.createElement)("div",{className:"samanlabs-seo-indexing-section"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Instant Indexing"),I&&!I.indexnow_enabled&&(0,a.createElement)("div",{className:"samanlabs-seo-indexing-notice samanlabs-seo-indexing-notice--info"},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.createElement)("path",{d:"M12 16v-4M12 8h.01"})),(0,a.createElement)("span",null,"Enable IndexNow in Settings to use instant indexing")),I&&I.indexnow_enabled&&(0,a.createElement)(a.Fragment,null,I.has_been_indexed&&I.last_submission&&(0,a.createElement)("div",{className:`samanlabs-seo-indexing-status samanlabs-seo-indexing-status--${I.last_submission.status}`},(0,a.createElement)("div",{className:"samanlabs-seo-indexing-status-icon"},"success"===I.last_submission.status?(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M20 6L9 17l-5-5"})):(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.createElement)("path",{d:"M15 9l-6 6M9 9l6 6"}))),(0,a.createElement)("div",{className:"samanlabs-seo-indexing-status-text"},(0,a.createElement)("strong",null,"success"===I.last_submission.status?"Submitted":"Failed"),(0,a.createElement)("span",null,I.last_submission.time_ago))),!I.has_been_indexed&&(0,a.createElement)("div",{className:"samanlabs-seo-indexing-status samanlabs-seo-indexing-status--never"},(0,a.createElement)("div",{className:"samanlabs-seo-indexing-status-icon"},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.createElement)("path",{d:"M12 6v6l4 2"}))),(0,a.createElement)("div",{className:"samanlabs-seo-indexing-status-text"},(0,a.createElement)("strong",null,"Not submitted"),(0,a.createElement)("span",null,"Request indexing to notify search engines"))),W&&(0,a.createElement)("div",{className:"samanlabs-seo-indexing-notice samanlabs-seo-indexing-notice--error"},W),(0,a.createElement)(i.Button,{variant:"secondary",className:"samanlabs-seo-indexing-button",onClick:F,disabled:T},T?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"samanlabs-seo-indexing-spinner"}),"Submitting..."):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,a.createElement)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})),"Request Indexing")),(0,a.createElement)("p",{className:"samanlabs-seo-field-help"},"Submit this URL to search engines via IndexNow for faster discovery.",I.total_submissions>0&&(0,a.createElement)(a.Fragment,null," Submitted ",I.total_submissions," time",1!==I.total_submissions?"s":"","."))))),"social"===C&&(0,a.createElement)("div",{className:"samanlabs-seo-tab-content"},(0,a.createElement)("div",{className:"samanlabs-seo-social-preview"},(0,a.createElement)("label",{className:"samanlabs-seo-section-label"},"Social Preview"),(0,a.createElement)("div",{className:"samanlabs-seo-social-card"},(0,a.createElement)("div",{className:"samanlabs-seo-social-image"},t.og_image||h?(0,a.createElement)("img",{src:t.og_image||h,alt:""}):(0,a.createElement)("div",{className:"samanlabs-seo-social-placeholder"},(0,a.createElement)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},(0,a.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,a.createElement)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,a.createElement)("path",{d:"M21 15l-5-5L5 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),(0,a.createElement)("span",null,"No image set"))),(0,a.createElement)("div",{className:"samanlabs-seo-social-content"},(0,a.createElement)("div",{className:"samanlabs-seo-social-url"},new URL(p).hostname),(0,a.createElement)("div",{className:"samanlabs-seo-social-title"},o),(0,a.createElement)("div",{className:"samanlabs-seo-social-desc"},m||"No description available")))),(0,a.createElement)("div",{className:"samanlabs-seo-field"},(0,a.createElement)("div",{className:"samanlabs-seo-field-header"},(0,a.createElement)("label",null,"Social Image URL")),(0,a.createElement)("input",{type:"url",className:"samanlabs-seo-field-input",value:t.og_image||"",onChange:e=>s("og_image",e.target.value),placeholder:"https://..."}),(0,a.createElement)("p",{className:"samanlabs-seo-field-help"},"1200x630 recommended. Leave empty to use featured image."),!t.og_image&&h&&(0,a.createElement)("p",{className:"samanlabs-seo-field-note"},"Using featured image as fallback")),(0,a.createElement)(i.Button,{variant:"secondary",className:"samanlabs-seo-media-button",onClick:()=>{const e=wp.media({title:"Select Social Image",button:{text:"Use Image"},multiple:!1});e.on("select",()=>{const a=e.state().get("selection").first().toJSON();s("og_image",a.url)}),e.open()}},(0,a.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"6px"}},(0,a.createElement)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,a.createElement)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,a.createElement)("path",{d:"M21 15l-5-5L5 21",stroke:"currentColor",strokeWidth:"2"})),"Select Image")),(0,a.createElement)(v,{isOpen:L.isOpen,onClose:U,onGenerate:j,fieldType:L.fieldType,currentValue:"title"===L.fieldType?t.title:t.description,postTitle:b,postContent:u,variableValues:N,aiProvider:w,aiPilot:x}))},N=()=>(0,a.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z",fill:"currentColor"})),f=window.samanlabsSeoEditor||{},w=f.variables||{},x=f.aiEnabled||!1,C=f.aiProvider||"none",S=f.aiPilot||null;(0,t.registerPlugin)("samanlabs-seo",{render:()=>{const[e,t]=(0,n.useState)({title:"",description:"",canonical:"",noindex:!1,nofollow:!1,og_image:"",focus_keyphrase:""}),[o,i]=(0,n.useState)(null),[c,m]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),[b,u]=(0,n.useState)({}),{postId:h,postTitle:E,postExcerpt:v,postContent:g,postType:_,postSlug:y,featuredImage:M}=(0,l.useSelect)(e=>{const a=e("core/editor"),t=a.getCurrentPost(),s=a.getEditedPostAttribute("featured_media");let l="";if(s){const a=e("core").getMedia(s);a&&(l=a.source_url)}return{postId:a.getCurrentPostId(),postTitle:a.getEditedPostAttribute("title")||"",postExcerpt:a.getEditedPostAttribute("excerpt")||"",postContent:a.getEditedPostContent()||"",postType:a.getCurrentPostType(),postSlug:t?.slug||"",featuredImage:l}},[]),{editPost:P}=(0,l.useDispatch)("core/editor");(0,n.useEffect)(()=>{if(!h||!_)return;const e={post:"posts",page:"pages",attachment:"media"}[a=_]||a;var a;r()({path:`/wp/v2/${e}/${h}`}).then(e=>{if(e.meta&&e.meta._samanlabs_seo_meta){const a=e.meta._samanlabs_seo_meta;t({title:a.title||"",description:a.description||"",canonical:a.canonical||"",noindex:"1"===a.noindex,nofollow:"1"===a.nofollow,og_image:a.og_image||"",focus_keyphrase:a.focus_keyphrase||""})}}).catch(()=>{})},[h,_]),(0,n.useEffect)(()=>{if(!h)return;const e=setTimeout(()=>{r()({path:`/samanlabs-seo/v1/audit/post/${h}`}).then(e=>{e.success&&e.data&&i(e.data)}).catch(()=>{})},500);return()=>clearTimeout(e)},[h,e,E,g]),(0,n.useEffect)(()=>{const e={post_title:E||"",post_excerpt:v||"",site_title:f.siteTitle||"",tagline:f.tagline||"",separator:f.separator||"-",current_year:(new Date).getFullYear().toString()};u(e)},[E,v]);const L=(0,n.useCallback)((a,s)=>{t(e=>({...e,[a]:s})),p(!0);const l={...e,[a]:s},n={title:l.title,description:l.description,canonical:l.canonical,noindex:l.noindex?"1":"",nofollow:l.nofollow?"1":"",og_image:l.og_image,focus_keyphrase:l.focus_keyphrase};P({meta:{_samanlabs_seo_meta:n}})},[e,P]),A=e.title||E||"Untitled",I=e.description||v||"",$=window.location.origin,T=y?`${$}/${y}/`:$;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(s.PluginSidebarMoreMenuItem,{target:"samanlabs-seo-sidebar",icon:(0,a.createElement)(N,null)},"Saman SEO"),(0,a.createElement)(s.PluginSidebar,{name:"samanlabs-seo-sidebar",title:"Saman SEO",icon:(0,a.createElement)(N,null)},(0,a.createElement)(k,{postId:h,seoMeta:e,updateMeta:L,seoScore:o,effectiveTitle:A,effectiveDescription:I,postUrl:T,postTitle:E,postContent:g,featuredImage:M,hasChanges:d,variables:w,variableValues:b,aiEnabled:x,aiProvider:C,aiPilot:S})))},icon:(0,a.createElement)(N,null)})})();