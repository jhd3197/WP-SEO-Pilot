"use strict";(globalThis.webpackChunksaman_seo=globalThis.webpackChunksaman_seo||[]).push([[197],{197(e,t,a){a.r(t),a.d(t,{default:()=>l});var s=a(609),c=a(455),n=a.n(c);const l=({onNavigate:e})=>{const[t,a]=(0,s.useState)(""),[c,l]=(0,s.useState)(""),[r,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[m,p]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[E,w]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{const e=await n()({path:"/saman-seo/v1/htaccess"});e.success&&(a(e.data.content||""),l(e.data.content||""),i(e.data.backups||[]))}catch(e){h("Failed to load .htaccess file: "+(e.message||"Unknown error"))}finally{d(!1)}})()},[]),(0,s.useEffect)(()=>{b(t!==c)},[t,c]);const k=(0,s.useCallback)(async()=>{p(!0),h(null),w(null);try{const e=await n()({path:"/saman-seo/v1/htaccess",method:"POST",data:{content:t}});e.success?(l(t),w("File saved successfully! A backup was created."),e.data.backups&&i(e.data.backups)):h(e.message||"Failed to save file")}catch(e){h(e.message||"Failed to save file")}finally{p(!1)}},[t]),v=(0,s.useCallback)(async e=>{if(window.confirm(`Restore backup from ${e.date}? This will overwrite the current .htaccess file.`)){p(!0),h(null);try{const t=await n()({path:"/saman-seo/v1/htaccess/restore",method:"POST",data:{backup:e.file}});t.success?(a(t.data.content),l(t.data.content),w("Backup restored successfully!"),g(!1)):h(t.message||"Failed to restore backup")}catch(e){h(e.message||"Failed to restore backup")}finally{p(!1)}}},[]),T=(0,s.useCallback)(e=>{const s=t.trim()?t+"\n\n# "+e.name+"\n"+e.code:"# "+e.name+"\n"+e.code;a(s)},[t]),N=(0,s.useCallback)(()=>{window.confirm("Discard all changes?")&&a(c)},[c]);return o?(0,s.createElement)("div",{className:"page"},(0,s.createElement)("div",{className:"page-header"},(0,s.createElement)("h1",null,".htaccess Editor")),(0,s.createElement)("div",{className:"card"},(0,s.createElement)("div",{className:"loading-state"},"Loading..."))):(0,s.createElement)("div",{className:"page"},(0,s.createElement)("div",{className:"page-header"},(0,s.createElement)("div",null,(0,s.createElement)("h1",null,".htaccess Editor"),(0,s.createElement)("p",null,"Edit your server configuration file. Changes take effect immediately.")),(0,s.createElement)("div",{className:"page-header__actions"},(0,s.createElement)("button",{type:"button",className:"btn btn--secondary",onClick:()=>g(!f)},(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,s.createElement)("path",{d:"M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8"}),(0,s.createElement)("path",{d:"M3 3v5h5"})),"Backups (",r.length,")"),y&&(0,s.createElement)("button",{type:"button",className:"btn btn--secondary",onClick:N},"Discard Changes"),(0,s.createElement)("button",{type:"button",className:"btn btn--primary",onClick:k,disabled:m||!y},m?"Saving...":"Save Changes"))),(0,s.createElement)("div",{className:"notice notice--warning"},(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20"},(0,s.createElement)("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),(0,s.createElement)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,s.createElement)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})),(0,s.createElement)("span",null,(0,s.createElement)("strong",null,"Caution:")," Incorrect .htaccess rules can break your site. A backup is created before each save.")),u&&(0,s.createElement)("div",{className:"notice notice--error"},(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20"},(0,s.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.createElement)("path",{d:"M12 8v4m0 4h.01"})),(0,s.createElement)("span",null,u)),E&&(0,s.createElement)("div",{className:"notice notice--success"},(0,s.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20"},(0,s.createElement)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,s.createElement)("path",{d:"M22 4L12 14.01l-3-3"})),(0,s.createElement)("span",null,E)),(0,s.createElement)("div",{className:"htaccess-layout"},(0,s.createElement)("div",{className:"card htaccess-editor-card"},(0,s.createElement)("div",{className:"htaccess-editor-header"},(0,s.createElement)("span",{className:"htaccess-editor-path"},"/.htaccess"),y&&(0,s.createElement)("span",{className:"htaccess-editor-modified"},"Modified")),(0,s.createElement)("textarea",{className:"htaccess-textarea",value:t,onChange:e=>a(e.target.value),spellCheck:"false",placeholder:"# Your .htaccess rules here..."})),(0,s.createElement)("div",{className:"htaccess-sidebar"},f&&(0,s.createElement)("div",{className:"card htaccess-backups"},(0,s.createElement)("h3",null,"Backups"),0===r.length?(0,s.createElement)("p",{className:"htaccess-backups__empty"},"No backups yet"):(0,s.createElement)("ul",{className:"htaccess-backups__list"},r.map(e=>(0,s.createElement)("li",{key:e.file,className:"htaccess-backup"},(0,s.createElement)("div",{className:"htaccess-backup__info"},(0,s.createElement)("span",{className:"htaccess-backup__date"},e.date),(0,s.createElement)("span",{className:"htaccess-backup__size"},e.size)),(0,s.createElement)("button",{type:"button",className:"btn btn--small btn--secondary",onClick:()=>v(e)},"Restore"))))),(0,s.createElement)("div",{className:"card htaccess-presets"},(0,s.createElement)("h3",null,"Quick Insert"),(0,s.createElement)("p",{className:"htaccess-presets__desc"},"Click to add common rules"),(0,s.createElement)("ul",{className:"htaccess-presets__list"},[{name:"Disable Directory Browsing",code:"Options -Indexes",description:"Prevent users from seeing directory contents"},{name:"Force HTTPS",code:"RewriteEngine On\nRewriteCond %{HTTPS} off\nRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]",description:"Redirect all HTTP traffic to HTTPS"},{name:"Remove www",code:"RewriteEngine On\nRewriteCond %{HTTP_HOST} ^www\\.(.*)$ [NC]\nRewriteRule ^(.*)$ https://%1/$1 [R=301,L]",description:"Redirect www to non-www version"},{name:"Add www",code:"RewriteEngine On\nRewriteCond %{HTTP_HOST} !^www\\. [NC]\nRewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]",description:"Redirect non-www to www version"},{name:"Block Bad Bots",code:"RewriteEngine On\nRewriteCond %{HTTP_USER_AGENT} (AhrefsBot|MJ12bot|SemrushBot|DotBot) [NC]\nRewriteRule .* - [F,L]",description:"Block common SEO crawlers/bots"},{name:"Enable GZIP Compression",code:"<IfModule mod_deflate.c>\n  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css\n  AddOutputFilterByType DEFLATE application/javascript application/x-javascript\n  AddOutputFilterByType DEFLATE application/json application/xml\n</IfModule>",description:"Compress text-based files for faster loading"},{name:"Browser Caching",code:'<IfModule mod_expires.c>\n  ExpiresActive On\n  ExpiresByType image/jpg "access plus 1 year"\n  ExpiresByType image/jpeg "access plus 1 year"\n  ExpiresByType image/png "access plus 1 year"\n  ExpiresByType image/gif "access plus 1 year"\n  ExpiresByType image/webp "access plus 1 year"\n  ExpiresByType text/css "access plus 1 month"\n  ExpiresByType application/javascript "access plus 1 month"\n</IfModule>',description:"Set browser caching for static files"},{name:"Security Headers",code:'<IfModule mod_headers.c>\n  Header set X-Content-Type-Options "nosniff"\n  Header set X-Frame-Options "SAMEORIGIN"\n  Header set X-XSS-Protection "1; mode=block"\n  Header set Referrer-Policy "strict-origin-when-cross-origin"\n</IfModule>',description:"Add security-related HTTP headers"}].map(e=>(0,s.createElement)("li",{key:e.name},(0,s.createElement)("button",{type:"button",className:"htaccess-preset",onClick:()=>T(e),title:e.description},(0,s.createElement)("span",{className:"htaccess-preset__name"},e.name),(0,s.createElement)("span",{className:"htaccess-preset__desc"},e.description)))))))))}}}]);