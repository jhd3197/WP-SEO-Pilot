"use strict";(globalThis.webpackChunkwp_seo_pilot_assets=globalThis.webpackChunkwp_seo_pilot_assets||[]).push([[271],{271(e,t,a){a.r(t),a.d(t,{default:()=>c});var l=a(609),n=a(87),s=a(455),o=a.n(s);const c=({onNavigate:e})=>{const[t,a]=(0,n.useState)([]),[s,c]=(0,n.useState)(!0),[r,i]=(0,n.useState)(!1),[m,d]=(0,n.useState)(null),[p,h]=(0,n.useState)("post"),[u,g]=(0,n.useState)(1),[E,v]=(0,n.useState)(1),[b,k]=(0,n.useState)({}),[N,y]=(0,n.useState)("all"),[w,f]=(0,n.useState)(""),[_,C]=(0,n.useState)([]),S=(0,n.useCallback)(async()=>{c(!0);try{const e=await o()({path:`/wpseopilot/v2/tools/bulk-editor/posts?post_type=${p}&page=${u}&per_page=20&filter=${N}&search=${encodeURIComponent(w)}`});e.success&&(a(e.data.posts),v(e.data.total_pages))}catch(e){console.error("Failed to fetch posts:",e)}finally{c(!1)}},[p,u,N,w]);(0,n.useEffect)(()=>{S()},[S]);const x=(e,t,a)=>{k(l=>({...l,[e]:{...l[e],[t]:a}}))},M=(e,t)=>b[e.id]&&void 0!==b[e.id][t]?b[e.id][t]:e[t]||"",B=Object.keys(b).length>0,O=async(e=null)=>{const t=e||_;if(0!==t.length){d(t);try{const e=await o()({path:"/wpseopilot/v2/tools/bulk-editor/generate",method:"POST",data:{post_ids:t}});if(e.success&&e.data.suggestions){const t={...b};e.data.suggestions.forEach(e=>{t[e.post_id]={...t[e.post_id],seo_title:e.title,seo_description:e.description}}),k(t)}}catch(e){console.error("Failed to generate:",e)}finally{d(null)}}},T=(e,t)=>"title"===t?0===e?"empty":e<30?"short":e>60?"long":"good":0===e?"empty":e<70?"short":e>160?"long":"good";return(0,l.createElement)("div",{className:"page bulk-editor-page"},(0,l.createElement)("div",{className:"page-header"},(0,l.createElement)("div",null,(0,l.createElement)("div",{className:"page-header__breadcrumb"},(0,l.createElement)("button",{type:"button",className:"breadcrumb-link",onClick:()=>e("tools")},"Tools"),(0,l.createElement)("span",{className:"breadcrumb-separator"},"/"),(0,l.createElement)("span",null,"Bulk Editor")),(0,l.createElement)("h1",null,"Smart Bulk Editor"),(0,l.createElement)("p",null,"Edit SEO titles and descriptions in bulk with AI-powered suggestions.")),(0,l.createElement)("div",{className:"page-header__actions"},_.length>0&&(0,l.createElement)("button",{type:"button",className:"button button--secondary",onClick:()=>O(),disabled:m},m?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner"}),"Generating..."):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("path",{d:"M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 011 1v3a1 1 0 01-1 1h-1v1a2 2 0 01-2 2H5a2 2 0 01-2-2v-1H2a1 1 0 01-1-1v-3a1 1 0 011-1h1a7 7 0 017-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 012-2z"})),"Generate AI (",_.length,")")),(0,l.createElement)("button",{type:"button",className:"button button--primary",onClick:async()=>{if(B){i(!0);try{const e=Object.entries(b).map(([e,t])=>({post_id:parseInt(e),...t}));(await o()({path:"/wpseopilot/v2/tools/bulk-editor/save",method:"POST",data:{changes:e}})).success&&(k({}),S())}catch(e){console.error("Failed to save:",e)}finally{i(!1)}}},disabled:!B||r},r?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner"}),"Saving..."):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),(0,l.createElement)("polyline",{points:"17 21 17 13 7 13 7 21"}),(0,l.createElement)("polyline",{points:"7 3 7 8 15 8"})),"Save Changes ",B&&`(${Object.keys(b).length})`)))),(0,l.createElement)("div",{className:"bulk-editor-controls"},(0,l.createElement)("div",{className:"bulk-editor-filters"},(0,l.createElement)("select",{value:p,onChange:e=>{h(e.target.value),g(1)},className:"bulk-editor-select"},(0,l.createElement)("option",{value:"post"},"Posts"),(0,l.createElement)("option",{value:"page"},"Pages")),(0,l.createElement)("select",{value:N,onChange:e=>{y(e.target.value),g(1)},className:"bulk-editor-select"},(0,l.createElement)("option",{value:"all"},"All"),(0,l.createElement)("option",{value:"missing_title"},"Missing SEO Title"),(0,l.createElement)("option",{value:"missing_description"},"Missing Description"),(0,l.createElement)("option",{value:"missing_both"},"Missing Both")),(0,l.createElement)("div",{className:"bulk-editor-search"},(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("circle",{cx:"11",cy:"11",r:"8"}),(0,l.createElement)("path",{d:"M21 21l-4.35-4.35"})),(0,l.createElement)("input",{type:"text",placeholder:"Search posts...",value:w,onChange:e=>{f(e.target.value),g(1)}}))),(0,l.createElement)("div",{className:"bulk-editor-stats"},_.length>0&&(0,l.createElement)("span",{className:"selected-count"},_.length," selected"))),(0,l.createElement)("div",{className:"bulk-editor-table-wrapper"},s?(0,l.createElement)("div",{className:"bulk-editor-loading"},(0,l.createElement)("span",{className:"spinner"}),"Loading posts..."):0===t.length?(0,l.createElement)("div",{className:"bulk-editor-empty"},(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"48",height:"48"},(0,l.createElement)("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),(0,l.createElement)("polyline",{points:"14 2 14 8 20 8"})),(0,l.createElement)("p",null,"No posts found matching your criteria.")):(0,l.createElement)("table",{className:"bulk-editor-table"},(0,l.createElement)("thead",null,(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"col-checkbox"},(0,l.createElement)("input",{type:"checkbox",checked:_.length===t.length,onChange:()=>{_.length===t.length?C([]):C(t.map(e=>e.id))}})),(0,l.createElement)("th",{className:"col-title"},"Post Title"),(0,l.createElement)("th",{className:"col-seo-title"},"SEO Title"),(0,l.createElement)("th",{className:"col-seo-desc"},"Meta Description"),(0,l.createElement)("th",{className:"col-actions"},"Actions"))),(0,l.createElement)("tbody",null,t.map(e=>{const t=M(e,"seo_title"),a=M(e,"seo_description"),n=m&&m.includes(e.id),s=!!b[e.id];return(0,l.createElement)("tr",{key:e.id,className:s?"row-modified":""},(0,l.createElement)("td",{className:"col-checkbox"},(0,l.createElement)("input",{type:"checkbox",checked:_.includes(e.id),onChange:()=>{return t=e.id,void C(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})),(0,l.createElement)("td",{className:"col-title"},(0,l.createElement)("div",{className:"post-info"},(0,l.createElement)("a",{href:e.edit_link,target:"_blank",rel:"noopener noreferrer",className:"post-title-link"},e.title),(0,l.createElement)("span",{className:"post-type-badge"},e.post_type))),(0,l.createElement)("td",{className:"col-seo-title"},(0,l.createElement)("div",{className:"field-wrapper"},(0,l.createElement)("input",{type:"text",value:t,onChange:t=>x(e.id,"seo_title",t.target.value),placeholder:e.title,className:n?"generating":"",disabled:n}),(0,l.createElement)("span",{className:`char-count ${T(t.length,"title")}`},t.length,"/60"))),(0,l.createElement)("td",{className:"col-seo-desc"},(0,l.createElement)("div",{className:"field-wrapper"},(0,l.createElement)("textarea",{value:a,onChange:t=>x(e.id,"seo_description",t.target.value),placeholder:"Enter meta description...",rows:2,className:n?"generating":"",disabled:n}),(0,l.createElement)("span",{className:`char-count ${T(a.length,"desc")}`},a.length,"/160"))),(0,l.createElement)("td",{className:"col-actions"},(0,l.createElement)("button",{type:"button",className:"action-button",onClick:()=>O([e.id]),disabled:n,title:"Generate AI suggestions"},n?(0,l.createElement)("span",{className:"spinner-small"}):(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("path",{d:"M12 2a2 2 0 012 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 017 7h1a1 1 0 011 1v3a1 1 0 01-1 1h-1v1a2 2 0 01-2 2H5a2 2 0 01-2-2v-1H2a1 1 0 01-1-1v-3a1 1 0 011-1h1a7 7 0 017-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 012-2z"})))))})))),E>1&&(0,l.createElement)("div",{className:"bulk-editor-pagination"},(0,l.createElement)("button",{type:"button",className:"pagination-button",onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===u},(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("path",{d:"M15 18l-6-6 6-6"})),"Previous"),(0,l.createElement)("span",{className:"pagination-info"},"Page ",u," of ",E),(0,l.createElement)("button",{type:"button",className:"pagination-button",onClick:()=>g(e=>Math.min(E,e+1)),disabled:u===E},"Next",(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16"},(0,l.createElement)("path",{d:"M9 18l6-6-6-6"})))))}}}]);