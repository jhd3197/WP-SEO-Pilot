"use strict";(globalThis.webpackChunksaman_seo=globalThis.webpackChunksaman_seo||[]).push([[373],{373(e,t,a){a.r(t),a.d(t,{default:()=>c});var l=a(609),s=a(455),n=a.n(s);const c=({onNavigate:e})=>{const[t,a]=(0,l.useState)(null),[s,c]=(0,l.useState)([]),[r,m]=(0,l.useState)(null),[o,i]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0),[E,p]=(0,l.useState)(!1),[b,h]=(0,l.useState)([]),[g,v]=(0,l.useState)("posts"),[N,_]=(0,l.useState)("post"),[y,f]=(0,l.useState)(""),[S,k]=(0,l.useState)(""),[x,w]=(0,l.useState)(1),[C,I]=(0,l.useState)(1),[$,L]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{const[e,t,l]=await Promise.all([n()({path:"/saman-seo/v1/indexnow/settings"}),n()({path:"/saman-seo/v1/indexnow/options"}),n()({path:"/saman-seo/v1/indexnow/stats"})]);e.success&&a(e.data),t.success&&L(t.data.post_types||[]),l.success&&m(l.data)}catch(e){console.error("Failed to fetch settings:",e)}})()},[]),(0,l.useEffect)(()=>{(async()=>{u(!0);try{const e=await n()({path:`/saman-seo/v1/indexnow/posts?post_type=${N}&page=${x}&per_page=20&search=${y}&status_filter=${S}`});e.success&&(c(e.data.posts||[]),I(e.data.pages||1),e.data.stats&&m(t=>({...t,...e.data.stats})))}catch(e){console.error("Failed to fetch posts:",e)}finally{u(!1)}})()},[N,x,y,S]),(0,l.useEffect)(()=>{"logs"===g&&(async()=>{try{const e=await n()({path:"/saman-seo/v1/indexnow/logs?per_page=50"});e.success&&i(e.data.items||[])}catch(e){console.error("Failed to fetch logs:",e)}})()},[g]);const F=(0,l.useCallback)(e=>{e.target.checked?h(s.map(e=>e.id)):h([])},[s]),P=(0,l.useCallback)(e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),T=(0,l.useCallback)(async()=>{if(0!==b.length&&!E){p(!0);try{if((await n()({path:"/saman-seo/v1/indexnow/bulk-submit",method:"POST",data:{post_ids:b}})).success){const[e,t]=await Promise.all([n()({path:`/saman-seo/v1/indexnow/posts?post_type=${N}&page=${x}&per_page=20`}),n()({path:"/saman-seo/v1/indexnow/stats"})]);e.success&&c(e.data.posts||[]),t.success&&m(t.data),h([])}}catch(e){console.error("Failed to submit:",e)}finally{p(!1)}}},[b,E,N,x]),R=(0,l.useCallback)(async e=>{try{await n()({path:`/saman-seo/v1/indexnow/submit-post/${e}`,method:"POST"});const t=await n()({path:`/saman-seo/v1/indexnow/posts?post_type=${N}&page=${x}&per_page=20`});t.success&&c(t.data.posts||[])}catch(e){console.error("Failed to submit:",e)}},[N,x]),M=({status:e})=>{const t={success:{label:"Indexed",className:"badge--success"},failed:{label:"Failed",className:"badge--error"},never:{label:"Not Submitted",className:"badge--neutral"}},a=t[e]||t.never;return(0,l.createElement)("span",{className:`badge ${a.className}`},a.label)};return t&&!t.enabled?(0,l.createElement)("div",{className:"page"},(0,l.createElement)("div",{className:"page-header"},(0,l.createElement)("div",null,(0,l.createElement)("h1",null,"Instant Indexing"),(0,l.createElement)("p",null,"Submit URLs to search engines via IndexNow for faster discovery."))),(0,l.createElement)("div",{className:"card"},(0,l.createElement)("div",{className:"empty-state"},(0,l.createElement)("div",{className:"empty-state__icon"},(0,l.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,l.createElement)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"}))),(0,l.createElement)("h3",null,"IndexNow is not enabled"),(0,l.createElement)("p",null,"Enable IndexNow in Settings to use instant indexing features."),(0,l.createElement)("button",{type:"button",className:"btn btn--primary",onClick:()=>e&&e("settings")},"Go to Settings")))):(0,l.createElement)("div",{className:"page"},(0,l.createElement)("div",{className:"page-header"},(0,l.createElement)("div",null,(0,l.createElement)("h1",null,"Instant Indexing"),(0,l.createElement)("p",null,"Submit URLs to search engines via IndexNow for faster discovery.")),b.length>0&&(0,l.createElement)("button",{type:"button",className:"btn btn--primary",onClick:T,disabled:E},E?"Submitting...":`Submit ${b.length} URLs`)),r&&(0,l.createElement)("div",{className:"stats-grid"},(0,l.createElement)("div",{className:"stat-card"},(0,l.createElement)("div",{className:"stat-card__value"},r.total||0),(0,l.createElement)("div",{className:"stat-card__label"},"Total Submissions")),(0,l.createElement)("div",{className:"stat-card stat-card--success"},(0,l.createElement)("div",{className:"stat-card__value"},r.success||0),(0,l.createElement)("div",{className:"stat-card__label"},"Successful")),(0,l.createElement)("div",{className:"stat-card stat-card--error"},(0,l.createElement)("div",{className:"stat-card__value"},r.failed||0),(0,l.createElement)("div",{className:"stat-card__label"},"Failed")),(0,l.createElement)("div",{className:"stat-card"},(0,l.createElement)("div",{className:"stat-card__value"},r.today||0),(0,l.createElement)("div",{className:"stat-card__label"},"Today"))),(0,l.createElement)("div",{className:"tabs-bar"},(0,l.createElement)("button",{type:"button",className:"tab-btn "+("posts"===g?"tab-btn--active":""),onClick:()=>v("posts")},"Posts"),(0,l.createElement)("button",{type:"button",className:"tab-btn "+("logs"===g?"tab-btn--active":""),onClick:()=>v("logs")},"Submission Logs")),"posts"===g&&(0,l.createElement)("div",{className:"card"},(0,l.createElement)("div",{className:"table-filters"},(0,l.createElement)("div",{className:"table-filters__left"},(0,l.createElement)("select",{className:"form-select",value:N,onChange:e=>{_(e.target.value),w(1)}},$.map(e=>(0,l.createElement)("option",{key:e.name,value:e.name},e.label))),(0,l.createElement)("select",{className:"form-select",value:S,onChange:e=>{k(e.target.value),w(1)}},(0,l.createElement)("option",{value:""},"All Status"),(0,l.createElement)("option",{value:"never"},"Not Submitted"),(0,l.createElement)("option",{value:"indexed"},"Indexed"),(0,l.createElement)("option",{value:"failed"},"Failed"))),(0,l.createElement)("div",{className:"table-filters__right"},(0,l.createElement)("input",{type:"text",className:"form-input",placeholder:"Search posts...",value:y,onChange:e=>{f(e.target.value),w(1)}}))),(0,l.createElement)("table",{className:"data-table"},(0,l.createElement)("thead",null,(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"data-table__check"},(0,l.createElement)("input",{type:"checkbox",checked:s.length>0&&b.length===s.length,onChange:F})),(0,l.createElement)("th",null,"Title"),(0,l.createElement)("th",null,"Status"),(0,l.createElement)("th",null,"Last Indexed"),(0,l.createElement)("th",{className:"data-table__actions"},"Actions"))),(0,l.createElement)("tbody",null,d?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"data-table__loading"},"Loading...")):0===s.length?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"data-table__empty"},"No posts found.")):s.map(e=>(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",{className:"data-table__check"},(0,l.createElement)("input",{type:"checkbox",checked:b.includes(e.id),onChange:()=>P(e.id)})),(0,l.createElement)("td",null,(0,l.createElement)("div",{className:"post-title"},(0,l.createElement)("strong",null,e.title||"(no title)"),(0,l.createElement)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"post-url"},e.url))),(0,l.createElement)("td",null,(0,l.createElement)(M,{status:e.indexing_status})),(0,l.createElement)("td",null,e.last_indexed_ago||"-"),(0,l.createElement)("td",{className:"data-table__actions"},(0,l.createElement)("button",{type:"button",className:"btn btn--small btn--secondary",onClick:()=>R(e.id),title:"Submit for indexing"},(0,l.createElement)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},(0,l.createElement)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})))))))),C>1&&(0,l.createElement)("div",{className:"table-pagination"},(0,l.createElement)("button",{type:"button",className:"btn btn--small",disabled:1===x,onClick:()=>w(e=>e-1)},"Previous"),(0,l.createElement)("span",{className:"pagination-info"},"Page ",x," of ",C),(0,l.createElement)("button",{type:"button",className:"btn btn--small",disabled:x===C,onClick:()=>w(e=>e+1)},"Next"))),"logs"===g&&(0,l.createElement)("div",{className:"card"},(0,l.createElement)("table",{className:"data-table"},(0,l.createElement)("thead",null,(0,l.createElement)("tr",null,(0,l.createElement)("th",null,"URL"),(0,l.createElement)("th",null,"Status"),(0,l.createElement)("th",null,"Response"),(0,l.createElement)("th",null,"Search Engine"),(0,l.createElement)("th",null,"Submitted"))),(0,l.createElement)("tbody",null,0===o.length?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"data-table__empty"},"No submission logs yet.")):o.map(e=>(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",null,(0,l.createElement)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"post-url"},e.url.length>50?e.url.substring(0,50)+"...":e.url)),(0,l.createElement)("td",null,(0,l.createElement)(M,{status:e.status})),(0,l.createElement)("td",null,e.response_code||"-"),(0,l.createElement)("td",null,e.search_engine),(0,l.createElement)("td",null,e.submitted_at)))))))}}}]);