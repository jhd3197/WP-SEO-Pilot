"use strict";(globalThis.webpackChunksaman_seo=globalThis.webpackChunksaman_seo||[]).push([[608],{608(e,a,t){t.r(a),t.d(a,{default:()=>o});var n=t(609),l=t(87),s=t(455),r=t.n(s);const c=[{value:"overview",label:"Overview"},{value:"broken",label:"Broken Links"},{value:"orphans",label:"Orphan Pages"}],o=()=>{const[e,a]=(0,l.useState)("overview"),[t,s]=(0,l.useState)(!0),[o,i]=(0,l.useState)(null),[m,p]=(0,l.useState)({items:[],total:0,page:1,total_pages:1}),[d,u]=(0,l.useState)({items:[],total:0,page:1,total_pages:1}),[E,h]=(0,l.useState)(!1),[g,k]=(0,l.useState)(null),[_,b]=(0,l.useState)(null),[N,v]=(0,l.useState)(""),y=(0,l.useCallback)(async()=>{try{const e=await r()({path:"/saman-seo/v1/link-health/summary"});e.success&&i(e.data)}catch(e){console.error("Failed to fetch summary:",e)}},[]),f=(0,l.useCallback)(async(e=1)=>{s(!0);try{const a=new URLSearchParams({page:e,per_page:50,type:N}),t=await r()({path:`/saman-seo/v1/link-health/broken?${a}`});t.success&&p(t.data)}catch(e){console.error("Failed to fetch broken links:",e)}finally{s(!1)}},[N]),w=(0,l.useCallback)(async(e=1)=>{s(!0);try{const a=new URLSearchParams({page:e,per_page:50}),t=await r()({path:`/saman-seo/v1/link-health/orphans?${a}`});t.success&&u(t.data)}catch(e){console.error("Failed to fetch orphan pages:",e)}finally{s(!1)}},[]),L=(0,l.useCallback)(async()=>{try{const e=await r()({path:"/saman-seo/v1/link-health/scan/status"});e.success&&e.data?(k(e.data),"running"===e.data.status?h(!0):h(!1)):(k(null),h(!1))}catch(e){console.error("Failed to check scan status:",e)}},[]);(0,l.useEffect)(()=>{y(),L()},[y,L]),(0,l.useEffect)(()=>{"broken"===e?f(1):"orphans"===e&&w(1)},[e,f,w]),(0,l.useEffect)(()=>{if(!E)return;const e=setInterval(()=>{L(),y()},3e3);return()=>clearInterval(e)},[E,L,y]);const S=e=>{if(!e)return"-";const a=new Date(e);return a.toLocaleDateString()+", "+a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return(0,n.createElement)("div",{className:"page"},(0,n.createElement)("div",{className:"page-header"},(0,n.createElement)("div",null,(0,n.createElement)("h1",null,"Link Health"),(0,n.createElement)("p",null,"Monitor and fix broken links across your site.")),(0,n.createElement)("div",{className:"header-actions"},(0,n.createElement)("button",{type:"button",className:"button primary",onClick:async()=>{h(!0);try{await r()({path:"/saman-seo/v1/link-health/scan",method:"POST",data:{type:"full"}}),L()}catch(e){console.error("Failed to start scan:",e),h(!1)}},disabled:E},E?"Scanning...":"Run Full Scan"))),E&&g&&(0,n.createElement)("div",{className:"scan-progress"},(0,n.createElement)("div",{className:"scan-progress__info"},(0,n.createElement)("span",null,"Scanning posts... ",g.scanned_posts," / ",g.total_posts)),(0,n.createElement)("div",{className:"scan-progress__bar"},(0,n.createElement)("div",{className:"scan-progress__fill",style:{width:g.scanned_posts/g.total_posts*100+"%"}}))),(0,n.createElement)("div",{className:"tabs"},c.map(t=>(0,n.createElement)("button",{key:t.value,type:"button",className:"tab "+(e===t.value?"active":""),onClick:()=>a(t.value)},t.label,"broken"===t.value&&o?.broken_links>0&&(0,n.createElement)("span",{className:"tab-badge danger"},o.broken_links),"orphans"===t.value&&o?.orphan_pages>0&&(0,n.createElement)("span",{className:"tab-badge warning"},o.orphan_pages)))),"overview"===e&&(0,n.createElement)("section",{className:"panel"},o?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"health-score-card"},(0,n.createElement)("div",{className:"health-score "+(C=o.health_score,C>=90?"success":C>=70?"warning":"danger")},(0,n.createElement)("span",{className:"health-score__value"},o.health_score,"%"),(0,n.createElement)("span",{className:"health-score__label"},"Link Health Score")),(0,n.createElement)("div",{className:"health-score__info"},(0,n.createElement)("p",null,o.health_score>=90?"Excellent! Your links are in great shape.":o.health_score>=70?"Good, but there are some issues to address.":"Needs attention. Multiple broken links detected."),o.last_scan&&(0,n.createElement)("span",{className:"muted"},"Last scan: ",S(o.last_scan)))),(0,n.createElement)("div",{className:"stats-grid"},(0,n.createElement)("div",{className:"stat-card"},(0,n.createElement)("span",{className:"stat-card__value"},o.total_links.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"Total Links")),(0,n.createElement)("div",{className:"stat-card danger"},(0,n.createElement)("span",{className:"stat-card__value"},o.broken_links.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"Broken Links")),(0,n.createElement)("div",{className:"stat-card warning"},(0,n.createElement)("span",{className:"stat-card__value"},o.redirects.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"Redirects")),(0,n.createElement)("div",{className:"stat-card"},(0,n.createElement)("span",{className:"stat-card__value"},o.internal.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"Internal Links")),(0,n.createElement)("div",{className:"stat-card"},(0,n.createElement)("span",{className:"stat-card__value"},o.external.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"External Links")),(0,n.createElement)("div",{className:"stat-card warning"},(0,n.createElement)("span",{className:"stat-card__value"},o.orphan_pages.toLocaleString()),(0,n.createElement)("span",{className:"stat-card__label"},"Orphan Pages"))),(o.broken_links>0||o.orphan_pages>0)&&(0,n.createElement)("div",{className:"quick-actions"},(0,n.createElement)("h3",null,"Recommended Actions"),o.broken_links>0&&(0,n.createElement)("button",{type:"button",className:"action-card",onClick:()=>a("broken")},(0,n.createElement)("span",{className:"action-card__icon danger"},"!"),(0,n.createElement)("div",{className:"action-card__content"},(0,n.createElement)("strong",null,"Fix ",o.broken_links," broken link",1!==o.broken_links?"s":""),(0,n.createElement)("span",null,"Update or remove links that return errors"))),o.orphan_pages>0&&(0,n.createElement)("button",{type:"button",className:"action-card",onClick:()=>a("orphans")},(0,n.createElement)("span",{className:"action-card__icon warning"},"?"),(0,n.createElement)("div",{className:"action-card__content"},(0,n.createElement)("strong",null,"Link to ",o.orphan_pages," orphan page",1!==o.orphan_pages?"s":""),(0,n.createElement)("span",null,"Pages with no internal links pointing to them"))))):(0,n.createElement)("div",{className:"loading-state"},"Loading summary...")),"broken"===e&&(0,n.createElement)("section",{className:"panel"},(0,n.createElement)("div",{className:"panel-header"},(0,n.createElement)("h3",null,"Broken Links"),(0,n.createElement)("div",{className:"filter-row"},(0,n.createElement)("label",{className:"filter-field"},(0,n.createElement)("span",null,"Type"),(0,n.createElement)("select",{value:N,onChange:e=>v(e.target.value)},(0,n.createElement)("option",{value:""},"All Links"),(0,n.createElement)("option",{value:"internal"},"Internal Only"),(0,n.createElement)("option",{value:"external"},"External Only"))))),t?(0,n.createElement)("div",{className:"loading-state"},"Loading broken links..."):0===m.items.length?(0,n.createElement)("div",{className:"empty-state"},(0,n.createElement)("div",{className:"empty-state__icon success"},(0,n.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"48",height:"48"},(0,n.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.createElement)("path",{d:"M9 12l2 2 4-4"}))),(0,n.createElement)("h3",null,"No broken links found"),(0,n.createElement)("p",null,"All your links are working correctly.")):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("table",{className:"data-table"},(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null,"Source Page"),(0,n.createElement)("th",null,"Broken URL"),(0,n.createElement)("th",null,"Link Text"),(0,n.createElement)("th",null,"Status"),(0,n.createElement)("th",null,"Actions"))),(0,n.createElement)("tbody",null,m.items.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",null,(0,n.createElement)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer"},e.source_title||"Untitled")),(0,n.createElement)("td",{className:"url-cell"},(0,n.createElement)("code",null,e.target_url),(0,n.createElement)("span",{className:"badge "+("external"===e.link_type?"info":"muted")},e.link_type)),(0,n.createElement)("td",null,e.link_text||"-"),(0,n.createElement)("td",null,(0,n.createElement)("span",{className:"badge danger"},e.http_code||"Error"),e.error_message&&(0,n.createElement)("span",{className:"muted small",title:e.error_message},e.error_message.substring(0,30),"...")),(0,n.createElement)("td",{className:"action-cell"},(0,n.createElement)("div",{className:"action-buttons"},(0,n.createElement)("a",{href:`/wp-admin/post.php?post=${e.source_post_id}&action=edit`,className:"button small",target:"_blank",rel:"noopener noreferrer"},"Edit"),(0,n.createElement)("button",{type:"button",className:"button ghost small",onClick:()=>(async e=>{b(e);try{(await r()({path:`/saman-seo/v1/link-health/link/${e}/recheck`,method:"POST"})).success&&(f(m.page),y())}catch(e){console.error("Failed to recheck link:",e)}finally{b(null)}})(e.id),disabled:_===e.id},_===e.id?"...":"Recheck"),(0,n.createElement)("button",{type:"button",className:"button ghost small danger",onClick:()=>(async e=>{if(window.confirm("Remove this link from the report? This will not remove the actual link from your content."))try{await r()({path:`/saman-seo/v1/link-health/link/${e}`,method:"DELETE"}),f(m.page),y()}catch(e){console.error("Failed to delete link:",e)}})(e.id)},"Dismiss"))))))),m.total_pages>1&&(0,n.createElement)("div",{className:"pagination"},(0,n.createElement)("span",{className:"pagination-info"},m.total.toLocaleString()," broken link",1!==m.total?"s":""),(0,n.createElement)("div",{className:"pagination-links"},(0,n.createElement)("button",{type:"button",className:"pagination-btn",disabled:m.page<=1,onClick:()=>f(m.page-1)},"‹ Previous"),(0,n.createElement)("span",{className:"pagination-current"},m.page," of ",m.total_pages),(0,n.createElement)("button",{type:"button",className:"pagination-btn",disabled:m.page>=m.total_pages,onClick:()=>f(m.page+1)},"Next ›"))))),"orphans"===e&&(0,n.createElement)("section",{className:"panel"},(0,n.createElement)("div",{className:"panel-header"},(0,n.createElement)("h3",null,"Orphan Pages"),(0,n.createElement)("p",{className:"panel-desc"},"Pages with no internal links pointing to them. Consider adding links from other content.")),t?(0,n.createElement)("div",{className:"loading-state"},"Loading orphan pages..."):0===d.items.length?(0,n.createElement)("div",{className:"empty-state"},(0,n.createElement)("div",{className:"empty-state__icon success"},(0,n.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"48",height:"48"},(0,n.createElement)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.createElement)("path",{d:"M9 12l2 2 4-4"}))),(0,n.createElement)("h3",null,"No orphan pages found"),(0,n.createElement)("p",null,"All your pages have at least one internal link pointing to them.")):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("table",{className:"data-table"},(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null,"Page Title"),(0,n.createElement)("th",null,"Type"),(0,n.createElement)("th",null,"Published"),(0,n.createElement)("th",null,"Actions"))),(0,n.createElement)("tbody",null,d.items.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",null,(0,n.createElement)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title||"Untitled")),(0,n.createElement)("td",null,(0,n.createElement)("span",{className:"badge muted"},e.post_type)),(0,n.createElement)("td",null,S(e.post_date)),(0,n.createElement)("td",{className:"action-cell"},(0,n.createElement)("a",{href:e.edit_url,className:"button small",target:"_blank",rel:"noopener noreferrer"},"Edit")))))),d.total_pages>1&&(0,n.createElement)("div",{className:"pagination"},(0,n.createElement)("span",{className:"pagination-info"},d.total.toLocaleString()," orphan page",1!==d.total?"s":""),(0,n.createElement)("div",{className:"pagination-links"},(0,n.createElement)("button",{type:"button",className:"pagination-btn",disabled:d.page<=1,onClick:()=>w(d.page-1)},"‹ Previous"),(0,n.createElement)("span",{className:"pagination-current"},d.page," of ",d.total_pages),(0,n.createElement)("button",{type:"button",className:"pagination-btn",disabled:d.page>=d.total_pages,onClick:()=>w(d.page+1)},"Next ›"))))));var C}}}]);