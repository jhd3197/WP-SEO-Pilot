"use strict";(globalThis.webpackChunksaman_labs_seo=globalThis.webpackChunksaman_labs_seo||[]).push([[743],{743(e,a,t){t.r(a),t.d(a,{default:()=>m});var l=t(609),s=t(87),n=t(455),c=t.n(n);const i={"saman-labs-seo":{className:"seo",svg:(0,l.createElement)("svg",{viewBox:"0 0 24 24",role:"img",focusable:"false"},(0,l.createElement)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"}))},"wp-ai-pilot":{className:"ai",svg:(0,l.createElement)("svg",{viewBox:"0 0 24 24",role:"img",focusable:"false"},(0,l.createElement)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}),(0,l.createElement)("circle",{cx:"12",cy:"12",r:"1"}),(0,l.createElement)("circle",{cx:"8",cy:"12",r:"1"}),(0,l.createElement)("circle",{cx:"16",cy:"12",r:"1"}))},"wp-security-pilot":{className:"security",svg:(0,l.createElement)("svg",{viewBox:"0 0 24 24",role:"img",focusable:"false"},(0,l.createElement)("path",{d:"M12 2L4 5.4v6.2c0 5.1 3.4 9.7 8 10.4 4.6-.7 8-5.3 8-10.4V5.4L12 2zm0 2.2l6 2.3v5.1c0 4-2.5 7.6-6 8.3-3.5-.7-6-4.3-6-8.3V6.5l6-2.3z"}),(0,l.createElement)("path",{d:"M10.5 12.7l-2-2-1.3 1.3 3.3 3.3 5.3-5.3-1.3-1.3-4 4z"}))}},r={"saman-labs-seo":"Performance-led SEO insights.","wp-ai-pilot":"Centralized AI management.","wp-security-pilot":"Open standard security."},m=()=>{const[e,a]=(0,s.useState)({}),[t,n]=(0,s.useState)(!0),[m,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)({}),[p,g]=(0,s.useState)({}),[b,v]=(0,s.useState)(null),E=(0,s.useCallback)(async()=>{try{n(!0);const e=await c()({path:"/samanlabs-seo/v1/updater/plugins"});a(e)}catch(e){console.error("Failed to load plugins:",e),v({type:"error",message:"Failed to load plugins."})}finally{n(!1)}},[]);(0,s.useEffect)(()=>{E()},[E]),(0,s.useEffect)(()=>{if(b){const e=setTimeout(()=>v(null),5e3);return()=>clearTimeout(e)}},[b]);const h=async(e,a)=>{u(t=>({...t,[e]:a})),v(null);try{const t=await c()({path:`/samanlabs-seo/v1/updater/${a}`,method:"POST",data:{slug:e}});v({type:"success",message:t.message||`Plugin ${a}d successfully.`}),await E()}catch(e){console.error(`Failed to ${a} plugin:`,e),v({type:"error",message:e.message||`Failed to ${a} plugin.`})}finally{u(a=>({...a,[e]:null}))}},N=e=>{const a=["managed-plugin-card"];return e.active&&a.push("active"),e.update_available&&a.push("has-update"),e.update_is_beta&&a.push("has-beta-update"),a.join(" ")};return(0,l.createElement)("div",{className:"page"},(0,l.createElement)("div",{className:"page-header"},(0,l.createElement)("div",null,(0,l.createElement)("h1",null,"Pilot Plugins"),(0,l.createElement)("p",null,"Install and manage plugins from the Pilot ecosystem.")),(0,l.createElement)("button",{className:"button ghost",onClick:async()=>{o(!0),v(null);try{await c()({path:"/samanlabs-seo/v1/updater/check",method:"POST"}),await E(),v({type:"success",message:"Update check complete."})}catch(e){console.error("Failed to check updates:",e),v({type:"error",message:"Failed to check for updates."})}finally{o(!1)}},disabled:m||t},m?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner is-active"}),"Checking..."):"Check for Updates")),b&&(0,l.createElement)("div",{className:`notice notice-${b.type}`},(0,l.createElement)("p",null,b.message),(0,l.createElement)("button",{type:"button",className:"notice-dismiss",onClick:()=>v(null)},(0,l.createElement)("span",{className:"screen-reader-text"},"Dismiss"))),t&&(0,l.createElement)("div",{className:"loading-state"},(0,l.createElement)("span",{className:"spinner is-active"}),(0,l.createElement)("p",null,"Loading plugins...")),!t&&(0,l.createElement)("div",{className:"managed-plugins-grid"},Object.entries(e).map(([e,a])=>(0,l.createElement)("div",{key:e,className:N(a)},(0,l.createElement)("div",{className:"managed-plugin-header"},(0,l.createElement)("div",{className:"managed-plugin-icon"},((e,a)=>{const t=(e=>i[e]||i["saman-labs-seo"])(e);return a.icon?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("img",{src:a.icon,alt:a.name,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,l.createElement)("div",{className:`managed-plugin-icon-fallback ${t.className}`,style:{display:"none"}},t.svg)):(0,l.createElement)("div",{className:`managed-plugin-icon-fallback ${t.className}`},t.svg)})(e,a)),(0,l.createElement)("div",{className:"managed-plugin-info"},(0,l.createElement)("div",{className:"managed-plugin-title"},(0,l.createElement)("h3",null,a.name),(e=>e.installed?e.update_available&&e.update_is_beta?(0,l.createElement)("span",{className:"badge beta"},"Beta Update"):e.update_available?(0,l.createElement)("span",{className:"badge warning"},"Update Available"):e.active?(0,l.createElement)("span",{className:"badge success"},"Active"):(0,l.createElement)("span",{className:"badge"},"Inactive"):(0,l.createElement)("span",{className:"badge"},"Not Installed"))(a)),(0,l.createElement)("p",{className:"managed-plugin-version"},(e=>{if(!e.installed)return e.remote_version?`v${e.remote_version} available`:"Checking...";if(e.update_available){const a=e.update_version||e.remote_version,t=e.update_is_beta?" (beta)":"";return`v${e.current_version} â†’ v${a}${t}`}return e.current_version?`v${e.current_version}`:""})(a)))),(0,l.createElement)("p",{className:"managed-plugin-description"},a.description),(0,l.createElement)("p",{className:"managed-plugin-tagline"},(e=>r[e]||"")(e)),a.installed&&(0,l.createElement)("div",{className:"managed-plugin-beta"},(0,l.createElement)("label",{className:"beta-toggle"},(0,l.createElement)("input",{type:"checkbox",checked:a.beta_enabled||!1,onChange:()=>(async(e,a)=>{g(a=>({...a,[e]:!0})),v(null);try{const t=await c()({path:"/samanlabs-seo/v1/updater/beta",method:"POST",data:{slug:e,enabled:!a}});v({type:"success",message:t.message}),await E()}catch(e){console.error("Failed to toggle beta:",e),v({type:"error",message:e.message||"Failed to toggle beta versions."})}finally{g(a=>({...a,[e]:!1}))}})(e,a.beta_enabled),disabled:p[e]}),(0,l.createElement)("span",{className:"beta-toggle-slider"}),(0,l.createElement)("span",{className:"beta-toggle-label"},"Beta versions",a.beta_available&&!a.beta_enabled&&a.beta_version&&(0,l.createElement)("span",{className:"beta-available-hint"}," (v",a.beta_version," available)")))),((e,a)=>{const t=d[e];return(0,l.createElement)("div",{className:"managed-plugin-actions"},!a.installed&&(0,l.createElement)("button",{className:"button primary",onClick:()=>h(e,"install"),disabled:t||!a.download_url},"install"===t?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner is-active"}),"Installing..."):"Install"),a.installed&&a.update_available&&(0,l.createElement)("button",{className:"button "+(a.update_is_beta?"beta":"warning"),onClick:()=>h(e,"update"),disabled:t},"update"===t?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner is-active"}),"Updating..."):a.update_is_beta?"Install Beta":"Update"),a.installed&&(a.active?(0,l.createElement)("button",{className:"button ghost",onClick:()=>h(e,"deactivate"),disabled:t},"deactivate"===t?"Deactivating...":"Deactivate"):(0,l.createElement)("button",{className:"button primary",onClick:()=>h(e,"activate"),disabled:t},"activate"===t?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"spinner is-active"}),"Activating..."):"Activate")),(0,l.createElement)("a",{href:a.github_url,target:"_blank",rel:"noopener noreferrer",className:"button ghost"},"GitHub"))})(e,a)))),!t&&0===Object.keys(e).length&&(0,l.createElement)("div",{className:"empty-state"},(0,l.createElement)("p",null,"No managed plugins found.")))}}}]);